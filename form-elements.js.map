{"version":3,"file":"form-elements.js","mappings":"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","sources":["webpack://toxin-hotel/./assets/favicons/favicons.js","webpack://toxin-hotel/|/\\.(svg%7Cpng%7Cico%7Cxml%7Cjson%7Cwebmanifest)$/","webpack://toxin-hotel/./blocks/checkbox/checkbox.js","webpack://toxin-hotel/./blocks/datepicker/datepicker.js","webpack://toxin-hotel/./blocks/dropdown/dropdown.js","webpack://toxin-hotel/./blocks/like/like.js","webpack://toxin-hotel/./blocks/paginator/paginator.js","webpack://toxin-hotel/./blocks/rate/rate.js","webpack://toxin-hotel/./node_modules/toxin-slider/model.ts","webpack://toxin-hotel/./node_modules/toxin-slider/thumb.ts","webpack://toxin-hotel/./node_modules/toxin-slider/progress-bar.ts","webpack://toxin-hotel/./node_modules/toxin-slider/bar.ts","webpack://toxin-hotel/./node_modules/toxin-slider/scale.ts","webpack://toxin-hotel/./node_modules/toxin-slider/view.ts","webpack://toxin-hotel/./node_modules/toxin-slider/controller.ts","webpack://toxin-hotel/./blocks/slider-toxin/slider-toxin.js","webpack://toxin-hotel/./node_modules/toxin-slider/toxin-slider.ts","webpack://toxin-hotel/./blocks/subscription/subscription.js","webpack://toxin-hotel/./blocks/text-field/text-field.js","webpack://toxin-hotel/./blocks/toggle/toggle.js","webpack://toxin-hotel/./assets/favicons/android-chrome-192x192.png","webpack://toxin-hotel/./assets/favicons/android-chrome-512x512.png","webpack://toxin-hotel/./assets/favicons/apple-touch-icon.png","webpack://toxin-hotel/./assets/favicons/browserconfig.xml","webpack://toxin-hotel/./assets/favicons/favicon-16x16.png","webpack://toxin-hotel/./assets/favicons/favicon-32x32.png","webpack://toxin-hotel/./assets/favicons/favicon.ico","webpack://toxin-hotel/./assets/favicons/mstile-144x144.png","webpack://toxin-hotel/./assets/favicons/mstile-150x150.png","webpack://toxin-hotel/./assets/favicons/mstile-310x150.png","webpack://toxin-hotel/./assets/favicons/mstile-310x310.png","webpack://toxin-hotel/./assets/favicons/mstile-70x70.png","webpack://toxin-hotel/./assets/favicons/safari-pinned-tab.svg","webpack://toxin-hotel/./assets/favicons/site.webmanifest"],"sourcesContent":["const faviconsContext = require.context(\n  '!!file-loader?name=assets/favicons/[name].[ext]!.',\n  true,\n  /\\.(svg|png|ico|xml|json|webmanifest)$/,\n);\n\nfaviconsContext.keys().forEach(faviconsContext);\n","var map = {\n\t\"./android-chrome-192x192.png\": 320,\n\t\"./android-chrome-512x512.png\": 641,\n\t\"./apple-touch-icon.png\": 879,\n\t\"./browserconfig.xml\": 978,\n\t\"./favicon-16x16.png\": 435,\n\t\"./favicon-32x32.png\": 723,\n\t\"./favicon.ico\": 211,\n\t\"./mstile-144x144.png\": 833,\n\t\"./mstile-150x150.png\": 962,\n\t\"./mstile-310x150.png\": 577,\n\t\"./mstile-310x310.png\": 811,\n\t\"./mstile-70x70.png\": 282,\n\t\"./safari-pinned-tab.svg\": 598,\n\t\"./site.webmanifest\": 983\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 250;","import $ from 'jquery';\n\nconst enter = 13;\nconst spaceBar = 32;\n\n$(document).on('keydown', '.checkbox__input', handleCheckKeydown);\n$(document).on('keydown mousedown', '.checkbox__expand-label', handleExpandToggle);\n\nfunction handleCheckKeydown(event) {\n  if (event.keyCode === enter || event.keyCode === spaceBar) {\n    event.preventDefault();\n\n    const $checkbox = $(event.target);\n\n    const checked = $checkbox.prop('checked');\n\n    $checkbox.prop('checked', !checked);\n  }\n}\n\nfunction handleExpandToggle(event) {\n  const { type, keyCode } = event;\n  const $expand = $(event.target);\n\n  if (type === 'keydown') {\n    if (keyCode === enter || keyCode === spaceBar) {\n      event.preventDefault();\n      $expand.toggleClass('checkbox__expand-label_close');\n    }\n  } else {\n    $expand.toggleClass('checkbox__expand-label_close');\n  }\n}\n","import $ from 'jquery';\n\nconst months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];\nconst shortMonths = ['янв', 'фев', 'мар', 'апр', 'мая', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\n\nconst enter = 13;\nconst spaceBar = 32;\nconst left = 37;\nconst up = 38;\nconst right = 39;\nconst down = 40;\n\nclass Datepicker {\n  $datepicker;\n\n  $arrival;\n\n  $departure;\n\n  $dropFilter;\n\n  $dropArrival;\n\n  $dropDeparture;\n\n  $back;\n\n  $monthYear;\n\n  $calendar;\n\n  $clear;\n\n  $confirm;\n\n  today;\n\n  cursorDate;\n\n  calendarMonth;\n\n  constructor(datepicker) {\n    this.$datepicker = $(datepicker);\n  }\n\n  init() {\n    this.$datepicker\n      .on('keydown', { datepicker: this }, handleDatepickerKeydown);\n\n    if (!this.$datepicker.hasClass('datepicker_format_demo')) {\n      this.$datepicker\n        .on('focusin', { datepicker: this }, handleDatepickerFocusin)\n        .on('mousedown', { datepicker: this }, handleDatepickerMousedown);\n\n      $('.js-datepicker__down', this.$datepicker)\n        .on('mousedown', stop);\n    }\n\n    this.$arrival = $('.js-datepicker__input_date_arrival', this.$datepicker)\n      .val('');\n\n    this.$departure = $('.js-datepicker__input_date_departure', this.$datepicker)\n      .val('');\n\n    this.$dropFilter = $('.js-datepicker__drop_format_filter', this.$datepicker);\n\n    this.$dropArrival = $('.js-datepicker__drop_date_arrival', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleArrivalMousedown);\n\n    this.$dropDeparture = $('.js-datepicker__drop_date_departure', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleDepartureMousedown);\n\n    this.$back = $('.js-datepicker__button_action_back', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleBackMousedown);\n\n    $('.js-datepicker__button_action_forward', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleForwardMousedown);\n\n    this.$monthYear = $('.js-datepicker__month-year', this.$datepicker);\n\n    this.$calendar = $('.js-datepicker__tbody', this.$datepicker)\n      .on(\n        'click',\n        '.datepicker__cell_clickable',\n        { datepicker: this },\n        handleCellClick,\n      );\n\n    this.$clear = $('.js-datepicker__button_action_clear', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleClearMousedown);\n\n    this.$confirm = $('.js-datepicker__button_action_confirm', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleConfirmMousedown);\n\n    const now = new Date();\n    this.today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    this.cursorDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    this.calendarMonth = new Date(now.getFullYear(), now.getMonth());\n\n    return this.update();\n  }\n\n  update() {\n    const arrival = this.$arrival.val();\n    const departure = this.$departure.val();\n\n    const dateArrival = new Date(arrival);\n    const dateDeparture = new Date(departure);\n\n    dateArrival.setHours(0, 0, 0);\n    dateDeparture.setHours(0, 0, 0);\n\n    const hasPeriod = (arrival !== '') && (departure !== '');\n\n    if (hasPeriod) {\n      this.$dropFilter\n        .text(\n          `${dateArrival.getDate()} ${shortMonths[dateArrival.getMonth()]} - ${dateDeparture.getDate()} ${shortMonths[dateDeparture.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text(arrival.split('-').reverse().join('.'))\n        .attr('datetime', arrival);\n      this.$dropDeparture\n        .text(departure.split('-').reverse().join('.'))\n        .attr('datetime', departure);\n    } else if (arrival !== '') {\n      this.$dropFilter\n        .text(\n          `${dateArrival.getDate()} ${shortMonths[dateArrival.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text(arrival.split('-').reverse().join('.'))\n        .attr('datetime', arrival);\n      this.$dropDeparture\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n    } else if (departure !== '') {\n      this.$dropFilter\n        .text(\n          `${dateDeparture.getDate()} ${shortMonths[dateDeparture.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n      this.$dropDeparture\n        .text(departure.split('-').reverse().join('.'))\n        .attr('datetime', departure);\n    } else {\n      this.$dropFilter.text('Укажите даты пребывания');\n      this.$dropDeparture\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n      this.$dropArrival\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n    }\n\n    this.$back.prop(\n      'disabled',\n      this.today.getMonth() === this.calendarMonth.getMonth()\n      && this.today.getFullYear() === this.calendarMonth.getFullYear(),\n    );\n\n    this.$monthYear.text(\n      `${months[this.calendarMonth.getMonth()]} ${this.calendarMonth.getFullYear()}`,\n    );\n\n    const cycleDate = new Date(this.calendarMonth.getFullYear(), this.calendarMonth.getMonth());\n\n    const dayOfWeek = cycleDate.getDay() ? cycleDate.getDay() - 1 : 6;\n    cycleDate.setDate(cycleDate.getDate() - dayOfWeek);\n\n    let calendarHTML = '';\n\n    do {\n      calendarHTML += '<tr class=\"datepicker__row\">';\n\n      for (let i = 0; i < 7; i += 1) {\n        let cellClasses = '';\n        let cellPeriod = '';\n\n        if (\n          cycleDate.getTime() === dateArrival.getTime()\n          || cycleDate.getTime() === dateDeparture.getTime()\n        ) {\n          cellClasses += ' datepicker__cell_selected';\n        } else if (cycleDate.getTime() === this.cursorDate.getTime()) {\n          cellClasses += ' datepicker__cell_format_cursor datepicker__cell_clickable';\n        } else if (cycleDate.getTime() === this.today.getTime()) {\n          cellClasses += ' datepicker__cell_date_today datepicker__cell_clickable';\n        } else if (cycleDate > this.today) {\n          cellClasses += ' datepicker__cell_clickable';\n        }\n\n        if (cycleDate.getMonth() !== this.calendarMonth.getMonth()) {\n          cellClasses += ' datepicker__cell_date_other-month';\n        }\n\n        if (hasPeriod) {\n          if (cycleDate.getTime() === dateArrival.getTime()) {\n            if (i < 6) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_arrival\"></div>';\n            }\n          } else if (cycleDate.getTime() === dateDeparture.getTime()) {\n            if (i > 0) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_departure\"></div>';\n            }\n          } else if (\n            dateArrival < cycleDate\n            && cycleDate < dateDeparture\n          ) {\n            if (i === 0) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_monday\"></div>';\n            } else if (i === 6) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_sunday\"></div>';\n            } else {\n              cellPeriod = '<div class=\"datepicker__cell-period\"></div>';\n            }\n          }\n        }\n\n        calendarHTML += `\n          <td class=\"js-datepicker__cell datepicker__cell ${cellClasses}\" data-date=\"${getDateString(cycleDate)}\">\n            ${cycleDate.getDate()}\n            ${cellPeriod}\n          </td>\n        `;\n\n        cycleDate.setDate(cycleDate.getDate() + 1);\n      }\n\n      calendarHTML += '</tr>';\n    } while (cycleDate.getMonth() === this.calendarMonth.getMonth());\n\n    this.$calendar.html(calendarHTML);\n\n    this.$clear.prop(\n      'disabled',\n      arrival === '' && departure === '',\n    );\n\n    this.$confirm.prop('disabled', !hasPeriod);\n\n    return this;\n  }\n\n  setDate(date) {\n    let arrival = this.$arrival.val();\n    let departure = this.$departure.val();\n\n    if (this.$datepicker.attr('data-active') === 'arrival') {\n      arrival = date;\n    } else {\n      departure = date;\n    }\n\n    if (arrival !== '' && departure !== '') {\n      if (arrival > departure) {\n        [arrival, departure] = [departure, arrival];\n      }\n    }\n\n    if (date === arrival) {\n      this.$datepicker.attr('data-active', 'departure');\n    } else {\n      this.$datepicker.attr('data-active', 'arrival');\n    }\n\n    this.$arrival.val(arrival);\n    this.$departure.val(departure);\n\n    this.$datepicker.trigger('input');\n\n    return this;\n  }\n}\n\nfunction handleDatepickerFocusin(event) {\n  const { datepicker } = event.data;\n  const { $datepicker } = datepicker;\n\n  const close = (eventIN) => {\n    const { close: closeIN, datepicker: datepickerIN } = eventIN.data;\n    const { $datepicker: $datepickerIN } = datepickerIN;\n\n    if ($datepickerIN.hasClass('datepicker_just-now-focused')) {\n      $datepickerIN.removeClass('datepicker_just-now-focused');\n      return;\n    }\n\n    $datepickerIN.removeClass('datepicker_open');\n\n    $(window).off('focusin focusout mousedown', closeIN);\n\n    $datepickerIN\n      .off('focusin focusout', stop)\n      .on('focusin', { datepicker: datepickerIN }, handleDatepickerFocusin);\n  };\n\n  $datepicker.addClass('datepicker_open datepicker_just-now-focused');\n\n  $(window).on('focusin focusout mousedown', { datepicker, close }, close);\n\n  $datepicker\n    .off('focusin', handleDatepickerFocusin)\n    .on('focusin  focusout', stop);\n}\n\nfunction handleDatepickerMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.toggleClass('datepicker_open');\n\n  event.stopPropagation();\n}\n\nfunction handleDatepickerKeydown(event) {\n  const { datepicker } = event.data;\n  const {\n    today,\n    cursorDate,\n    calendarMonth,\n    $arrival,\n    $departure,\n  } = datepicker;\n  const { keyCode } = event;\n\n  const arrival = new Date($arrival.val());\n  const departure = new Date($departure.val());\n\n  arrival.setHours(0, 0, 0);\n  departure.setHours(0, 0, 0);\n\n  if (keyCode === enter || keyCode === spaceBar) {\n    event.preventDefault();\n\n    if (\n      cursorDate.getTime() === arrival.getTime()\n      || cursorDate.getTime() === departure.getTime()\n    ) {\n      return;\n    }\n\n    datepicker.setDate(getDateString(cursorDate));\n\n    datepicker.update();\n\n    return;\n  }\n\n  const temp = new Date(\n    cursorDate.getFullYear(),\n    cursorDate.getMonth(),\n    cursorDate.getDate(),\n  );\n\n  switch (keyCode) {\n    case left:\n      temp.setDate(temp.getDate() - 1);\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() - 1);\n      }\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() - 1);\n      }\n      break;\n    case up:\n      temp.setDate(temp.getDate() - 7);\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() - 7);\n      }\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() - 7);\n      }\n      break;\n    case right:\n      temp.setDate(temp.getDate() + 1);\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() + 1);\n      }\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() + 1);\n      }\n      break;\n    case down:\n      temp.setDate(temp.getDate() + 7);\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() + 7);\n      }\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() + 7);\n      }\n      break;\n    default:\n      return;\n  }\n\n  event.preventDefault();\n\n  if (temp < today) {\n    return;\n  }\n\n  cursorDate.setFullYear(\n    temp.getFullYear(),\n    temp.getMonth(),\n    temp.getDate(),\n  );\n\n  calendarMonth.setFullYear(\n    temp.getFullYear(),\n    temp.getMonth(),\n  );\n\n  datepicker.update();\n}\n\nfunction handleArrivalMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.attr('data-active', 'arrival');\n}\n\nfunction handleDepartureMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.attr('data-active', 'departure');\n}\n\nfunction handleForwardMousedown(event) {\n  const { datepicker } = event.data;\n  const { calendarMonth: month } = datepicker;\n\n  month.setMonth(month.getMonth() + 1);\n\n  datepicker.update();\n}\n\nfunction handleBackMousedown(event) {\n  const { datepicker } = event.data;\n  const { calendarMonth: month } = datepicker;\n\n  month.setMonth(month.getMonth() - 1);\n\n  datepicker.update();\n}\n\nfunction handleCellClick(event) {\n  const { datepicker } = event.data;\n\n  const date = $(event.target).data('date');\n\n  datepicker.setDate(date);\n\n  datepicker.update();\n}\n\nfunction handleClearMousedown(event) {\n  const { datepicker } = event.data;\n  const {\n    $datepicker,\n    $arrival,\n    $departure,\n    today,\n    cursorDate,\n    calendarMonth,\n  } = datepicker;\n\n  $datepicker.attr('data-active', 'arrival');\n\n  $arrival.val('');\n  $departure.val('');\n\n  $datepicker.trigger('input');\n\n  cursorDate.setFullYear(today.getFullYear(), today.getMonth(), today.getDate());\n  calendarMonth.setFullYear(today.getFullYear(), today.getMonth());\n\n  datepicker.update();\n}\n\nfunction handleConfirmMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.removeClass('datepicker_open');\n}\n\nfunction stop(event) {\n  event.stopPropagation();\n}\n\nfunction getDateString(date) {\n  const zeroMonth = date.getMonth() < 9 ? '0' : '';\n  const zeroDate = date.getDate() < 10 ? '0' : '';\n\n  return `${date.getFullYear()}-${zeroMonth}${date.getMonth() + 1}-${zeroDate}${date.getDate()}`;\n}\n\n$('.js-datepicker').each((index, datepicker) => {\n  const jsDatepicker = new Datepicker(datepicker);\n  jsDatepicker.init();\n});\n","import $ from 'jquery';\n\nconst pressingTime = 500;\nconst changeInterval = 75;\n\nconst maxNumberItems = 99;\n\nconst deleteKey = 46;\nconst backspaceKey = 8;\nconst zeroKey = 48;\nconst nineKey = 57;\n\nclass Dropdown {\n  $dropdown;\n\n  $drop;\n\n  $quantities;\n\n  $clear;\n\n  $confirm;\n\n  constructor(dropdown) {\n    this.$dropdown = $(dropdown);\n  }\n\n  init() {\n    this.$dropdown\n      .on('mousedown', { dropdown: this }, handleDropdownMousedown)\n      .on('input', { dropdown: this }, handleDropdownInput)\n      .on('focusin', { dropdown: this }, handleDropdownFocusin);\n\n    this.$drop = $('.js-dropdown__drop', this.$dropdown);\n\n    this.$quantities = $('.js-dropdown__quantity', this.$dropdown);\n\n    $('.js-dropdown__item', this.$dropdown).each((index, item) => {\n      const $item = $(item);\n\n      const $quantity = $('.js-dropdown__quantity', $item)\n        .on('keydown', handleQuantityKeydown)\n        .val('');\n\n      const $minus = $('.js-dropdown__counter-button_action_minus', $item)\n        .on('mousedown', { $quantity }, handleMinusMousedown);\n\n      const $plus = $('.js-dropdown__counter-button_action_plus', $item)\n        .on('mousedown', { $quantity }, handlePlusMousedown);\n\n      $quantity\n        .on('input', { $minus, $plus }, handleQuantityInput);\n\n      $('.js-dropdown__counter-button', $item)\n        .on('mouseup mouseout focusout', { $quantity }, handleCounterButtonMouseup);\n    });\n\n    $('.js-dropdown__down', this.$dropdown)\n      .on('mousedown', stop);\n\n    this.$clear = $('.js-dropdown__button_action_clear', this.$dropdown)\n      .on('mousedown', { dropdown: this }, handleClearMousedown);\n\n    this.$confirm = $('.js-dropdown__button_action_confirm', this.$dropdown)\n      .on('mousedown', { dropdown: this }, handleConfirmMousedown);\n\n    return this;\n  }\n}\n\nfunction handleDropdownMousedown(event) {\n  const { $dropdown } = event.data.dropdown;\n\n  $dropdown.toggleClass('dropdown_open');\n\n  event.stopPropagation();\n}\n\nfunction handleDropdownFocusin(event) {\n  const { dropdown } = event.data;\n  const { $dropdown } = dropdown;\n\n  const close = (eventIN) => {\n    const { close: closeIN, dropdown: dropdownIN } = eventIN.data;\n    const { $dropdown: $dropdownIN } = dropdownIN;\n\n    if ($dropdownIN.hasClass('dropdown_just-now-focused')) {\n      $dropdownIN.removeClass('dropdown_just-now-focused');\n      return;\n    }\n\n    $dropdownIN.removeClass('dropdown_open');\n\n    $(window).off('focusin focusout mousedown', closeIN);\n\n    $dropdownIN\n      .off('focusin focusout', stop)\n      .on('focusin', { dropdown: dropdownIN }, handleDropdownFocusin);\n  };\n\n  $dropdown.addClass('dropdown_open dropdown_just-now-focused');\n\n  $(window).on('focusin focusout mousedown', { dropdown, close }, close);\n\n  $dropdown\n    .off('focusin', handleDropdownFocusin)\n    .on('focusin focusout', stop);\n}\n\nfunction handleDropdownInput(event) {\n  const { dropdown } = event.data;\n  const {\n    $drop,\n    $quantities,\n    $clear,\n    $confirm,\n  } = dropdown;\n\n  const quantities = $quantities.get();\n\n  let isEmpty = true;\n  let isEnough = true;\n\n  quantities.reduceRight((previous, input) => {\n    const $input = $(input);\n\n    const quantity = $input.attr('data-quantity');\n    const surplus = $input.attr('data-surplus');\n    const nominative = $input.attr('data-nominative');\n    const genitive = $input.attr('data-genitive');\n    const genitivePlural = $input.attr('data-genitive-plural');\n    const min = parseInt($input.attr('data-min'), 10);\n\n    const thisValue = parseInt(quantity, 10);\n\n    if (thisValue > 0) {\n      isEmpty = false;\n    }\n\n    if (thisValue < min) {\n      isEnough = false;\n    }\n\n    const value = thisValue + previous;\n\n    if (surplus !== undefined) {\n      return value;\n    }\n\n    const lastTwoDigits = value % 100;\n    const lastDigit = value % 10;\n\n    const genitivePluralValue = (lastTwoDigits > 4 && lastTwoDigits < 21)\n      || lastDigit > 4\n      || lastDigit === 0;\n\n    if (value === 0) {\n      $input.attr('data-value', '');\n    } else if (genitivePluralValue) {\n      $input.attr('data-value', `${value} ${genitivePlural}`);\n    } else if (lastDigit === 1) {\n      $input.attr('data-value', `${value} ${nominative}`);\n    } else {\n      $input.attr('data-value', `${value} ${genitive}`);\n    }\n\n    return 0;\n  }, 0);\n\n  let numberItems = 0;\n\n  const common = quantities.reduce((previous, input) => {\n    const $input = $(input);\n    const value = $input.attr('data-value');\n\n    if (value !== '') {\n      numberItems += 1;\n\n      if (numberItems === maxNumberItems + 1) {\n        return `${previous}...`;\n      }\n\n      if (numberItems > maxNumberItems + 1) {\n        return previous;\n      }\n    }\n\n    if (value !== '' && previous !== '') {\n      return `${previous}, ${value}`;\n    }\n\n    return `${previous}${value}`;\n  }, '');\n\n  if (common !== '') {\n    $drop.text(common);\n  } else {\n    $drop.text($drop.attr('data-placeholder'));\n  }\n\n  $clear.prop('disabled', isEmpty);\n  $confirm.prop('disabled', !isEnough);\n}\n\nfunction handleMinusMousedown(event) {\n  const { $quantity } = event.data;\n  const $button = $(event.target);\n\n  minus($quantity);\n\n  if (parseInt($quantity.val(), 10) > 0) {\n    const timerID = setTimeout(\n      fastMinus,\n      pressingTime,\n      $quantity,\n      $button,\n    );\n\n    $button.attr('data-timer-id', timerID);\n  }\n}\n\nfunction handlePlusMousedown(event) {\n  const { $quantity } = event.data;\n  const $button = $(event.target);\n  const max = parseInt($quantity.attr('max'), 10);\n\n  plus($quantity);\n\n  if (parseInt($quantity.val(), 10) < max) {\n    const timerID = setTimeout(\n      fastPlus,\n      pressingTime,\n      $quantity,\n      $button,\n    );\n\n    $button.attr('data-timer-id', timerID);\n  }\n}\n\nfunction handleCounterButtonMouseup(event) {\n  const timerID = parseInt($(event.target).attr('data-timer-id'), 10);\n\n  clearTimeout(timerID);\n  clearInterval(timerID);\n}\n\nfunction handleQuantityInput(event) {\n  const $input = $(event.target);\n  const { $minus, $plus } = event.data;\n\n  const previous = parseInt($input.attr('data-previous'), 10);\n\n  const valusString = $input.val();\n\n  const valueNumber = parseInt(valusString, 10) || 0;\n\n  const max = $input.attr('max');\n\n  const isCorrect = valusString.match(/^\\d{0,2}$/)\n    && valueNumber <= max\n    && valueNumber >= 0;\n\n  if (!isCorrect) {\n    if (previous > 0) {\n      $input.val(previous);\n    } else {\n      $input.val('');\n    }\n    return;\n  }\n\n  $input.val(valusString.replace(/^0*/, ''));\n\n  $input\n    .attr('data-quantity', valueNumber)\n    .attr('data-previous', valueNumber);\n\n  $minus.prop('disabled', !(valueNumber > 0));\n\n  $plus.prop('disabled', !(valueNumber < max));\n\n  if (valueNumber < 1) {\n    const timerID = parseInt($minus.attr('data-timer-id'), 10);\n\n    clearTimeout(timerID);\n    clearInterval(timerID);\n  } else if (valueNumber >= max) {\n    const timerID = parseInt($plus.attr('data-timer-id'), 10);\n\n    clearTimeout(timerID);\n    clearInterval(timerID);\n  }\n}\n\nfunction handleQuantityKeydown(event) {\n  const $input = $(event.target);\n  const { keyCode } = event;\n\n  const max = $input.attr('max');\n\n  let valueString = $input.val();\n\n  if (keyCode === backspaceKey || keyCode === deleteKey) {\n    event.preventDefault();\n\n    $input.val(valueString.replace(/.$/, ''));\n    $input.trigger('input');\n  } else if (keyCode >= zeroKey && keyCode <= nineKey) {\n    event.preventDefault();\n\n    const digit = keyCode - zeroKey;\n\n    valueString = `${valueString}${digit}`;\n    let valueNumber = parseInt(valueString, 10);\n\n    let isCorrect = valueString.match(/^\\d{0,2}$/)\n      && valueNumber <= max\n      && valueNumber >= 0;\n\n    if (!isCorrect) {\n      if (valueString.length > 1) {\n        valueString = valueString.replace(/^./, '');\n        valueNumber = parseInt(valueString, 10);\n\n        isCorrect = valueString.match(/^\\d{0,2}$/)\n          && valueNumber <= max\n          && valueNumber >= 0;\n\n        if (!isCorrect) {\n          if (valueString.length > 1) {\n            valueString = valueString.replace(/^./, '');\n            valueNumber = parseInt(valueString, 10);\n\n            isCorrect = valueString.match(/^\\d{0,2}$/)\n              && valueNumber <= max\n              && valueNumber >= 0;\n\n            if (!isCorrect) {\n              return;\n            }\n          } else {\n            return;\n          }\n        }\n      } else {\n        return;\n      }\n    }\n\n    $input.val(valueString);\n    $input.trigger('input');\n  }\n}\n\nfunction handleClearMousedown(event) {\n  const { $dropdown, $quantities } = event.data.dropdown;\n\n  $quantities.each((index, input) => {\n    const $input = $(input);\n\n    $input\n      .val('')\n      .triggerHandler('input');\n  });\n\n  $dropdown.trigger('input');\n}\n\nfunction handleConfirmMousedown(event) {\n  const { $dropdown } = event.data.dropdown;\n\n  $dropdown.removeClass('dropdown_open');\n}\n\nfunction minus($input) {\n  const value = parseInt($input.val(), 10);\n\n  if (value > 0) {\n    $input.val(value - 1);\n  }\n\n  $input.trigger('input');\n}\n\nfunction plus($input) {\n  const value = parseInt($input.val(), 10) || 0;\n\n  const max = $input.attr('max');\n\n  if (value < max) {\n    $input.val(value + 1);\n  }\n\n  $input.trigger('input');\n}\n\nfunction fastMinus($input, $button) {\n  const timerID = setInterval(minus, changeInterval, $input);\n\n  $button.attr('data-timer-id', timerID);\n}\n\nfunction fastPlus($input, $button) {\n  const timerID = setInterval(plus, changeInterval, $input);\n\n  $button.attr('data-timer-id', timerID);\n}\n\nfunction stop(event) {\n  event.stopPropagation();\n}\n\n$('.js-dropdown').each((index, dropdown) => {\n  const jsDropdown = new Dropdown(dropdown);\n  jsDropdown.init();\n});\n","import $ from 'jquery';\n\nconst enter = 13;\nconst spaceBar = 32;\n\nclass Like {\n  $like;\n\n  $number;\n\n  $input;\n\n  constructor(like) {\n    this.$like = $(like);\n  }\n\n  init() {\n    const { $like } = this;\n    this.$number = $('.js-like__number', $like);\n    this.$input = $('.js-like__input', $like)\n      .val(parseInt($like.attr('data-likes'), 10));\n\n    this.$like\n      .on(\n        'mousedown',\n        { like: this },\n        handleLikeMousedown,\n      )\n      .on(\n        'keydown',\n        { like: this },\n        handleLikeKeydown,\n      );\n\n    return this;\n  }\n\n  activate() {\n    const { $like, $number, $input } = this;\n\n    const number = $like.hasClass('like_active')\n      ? parseInt($like.attr('data-likes'), 10) - 1\n      : parseInt($like.attr('data-likes'), 10) + 1;\n\n    $like\n      .toggleClass('like_active')\n      .attr('data-likes', `${number}`);\n\n    $number.text(`${number}`);\n\n    $input.val(number);\n\n    return this;\n  }\n}\n\nfunction handleLikeMousedown(event) {\n  const { like } = event.data;\n\n  like.activate();\n}\n\nfunction handleLikeKeydown(event) {\n  const { like } = event.data;\n  const { keyCode } = event;\n\n  if (keyCode === spaceBar || keyCode === enter) {\n    event.preventDefault();\n\n    like.activate();\n  }\n}\n\n$('.js-like').each((index, like) => {\n  const jsLike = new Like(like);\n  jsLike.init();\n});\n","import $ from 'jquery';\n\nconst left = 37;\nconst right = 39;\n\n// this constant should be duplicated in ./paginator.pug: const numberItemsInPage = 12;\nconst numberItemsInPage = 12;\n\nclass Paginator {\n  $paginator;\n\n  $description;\n\n  length;\n\n  active;\n\n  constructor(paginator) {\n    this.$paginator = $(paginator);\n  }\n\n  init() {\n    this.active = 1;\n\n    this.length = parseInt(this.$paginator.attr('data-length'), 10);\n\n    this.$description = $('.js-paginator__description', this.$paginator);\n\n    this.$paginator\n      .on(\n        'keydown',\n        { paginator: this },\n        handleItemKeydown,\n      )\n      .on(\n        'mousedown',\n        '.js-paginator__item',\n        { paginator: this },\n        handleItemMousedown,\n      );\n\n    return this;\n  }\n\n  back() {\n    if (this.active > 1) {\n      this.setActive(this.active - 1);\n    }\n\n    return this;\n  }\n\n  forward() {\n    if (this.active < this.length) {\n      this.setActive(this.active + 1);\n    }\n\n    return this;\n  }\n\n  setActive(active) {\n    this.active = active;\n    this.$paginator.attr('data-active', active);\n    this.$description.text(\n      `${(active - 1) * numberItemsInPage + 1} – ${active * numberItemsInPage} из 100+ вариантов аренды`,\n    );\n\n    return this;\n  }\n}\n\nfunction handleItemKeydown(event) {\n  const { keyCode } = event;\n  const { paginator } = event.data;\n\n  if (keyCode === left) {\n    event.preventDefault();\n\n    paginator.back();\n\n    return;\n  }\n\n  if (keyCode === right) {\n    event.preventDefault();\n\n    paginator.forward();\n  }\n}\n\nfunction handleItemMousedown(event) {\n  const { paginator } = event.data;\n\n  const number = $(event.target).attr('data-number');\n\n  if (number === 'back') {\n    paginator.back();\n\n    return;\n  }\n\n  if (number === 'forward') {\n    paginator.forward();\n\n    return;\n  }\n\n  paginator.setActive(parseInt(number, 10));\n}\n\n$('.js-paginator').each((index, paginator) => {\n  const jsPaginator = new Paginator(paginator);\n  jsPaginator.init();\n});\n","import $ from 'jquery';\n\n/*  this constant should be duplicated in ./rate.pug: const maxRating = 5;\n    and in ./rate.scss: $max-rating: 5; */\nconst maxRating = 5;\n\nconst left = 37;\nconst right = 39;\n\nclass Rate {\n  $rate;\n\n  $input;\n\n  rating;\n\n  constructor(rate) {\n    this.$rate = $(rate);\n\n    this.rating = parseInt(this.$rate.attr('data-rating'), 10);\n  }\n\n  init() {\n    this.$rate\n      .on('mouseover', '.js-rate__star', { rate: this }, handleStarMouseover)\n      .on('mouseout', '.js-rate__star', { rate: this }, handleStarMouseout)\n      .on('mousedown', '.js-rate__star', { rate: this }, handleStarMousedown)\n      .on('keydown', { rate: this }, handleRateKeydown)\n      .append(`\n        <input\n          type=\"number\"\n          class=\"rate__input js-rate__input\"\n          name=\"rating\"\n        >`);\n\n    this.$input = $('.js-rate__input').val(this.rating);\n\n    return this;\n  }\n\n  setRating(rating) {\n    this.rating = rating;\n\n    return this;\n  }\n}\n\nfunction handleStarMouseover(event) {\n  const { $rate } = event.data.rate;\n\n  $rate.attr('data-rating', $(event.target).attr('data-rating'));\n}\n\nfunction handleStarMouseout(event) {\n  const { $rate, rating } = event.data.rate;\n\n  $rate.attr('data-rating', rating);\n}\n\nfunction handleStarMousedown(event) {\n  const { rate } = event.data;\n  const rating = parseInt($(event.target).attr('data-rating'), 10);\n\n  rate.setRating(rating);\n  rate.$input.val(rating);\n}\n\nfunction handleRateKeydown(event) {\n  const { rate } = event.data;\n  const { keyCode } = event;\n  const { $rate, $input, rating } = rate;\n\n  if (keyCode === left || keyCode === right) {\n    event.preventDefault();\n\n    const newRating = (() => {\n      if (keyCode === left) {\n        if (rating > 1) {\n          return rating - 1;\n        }\n\n        return rating;\n      }\n\n      if (rating < maxRating) {\n        return rating + 1;\n      }\n\n      return rating;\n    })();\n\n    rate.setRating(newRating);\n    $input.val(newRating);\n    $rate.attr('data-rating', newRating);\n  }\n}\n\n$('.js-rate.rate_enabled').each((index, rate) => {\n  const jsRate = new Rate(rate);\n  jsRate.init();\n});\n","export default class Model {\n  state: ModelState = {\n    start: 0,\n    end: 0,\n    step: 0,\n    from: 0,\n    to: 0,\n    hasTwoValues: false,\n  };\n\n  private modulo = 0;\n\n  constructor(state: ModelState) {\n    this.update(state);\n  }\n\n  update(message: Message): ModelState {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n    const { modulo } = this;\n\n    const assignToNearest = (between: number) => {\n      if (hasTwoValues) {\n        if (Math.abs(from - between) < Math.abs(to - between)) {\n          this.state.from = between;\n        } else {\n          this.state.to = between;\n        }\n      } else {\n        this.state.from = between;\n      }\n    };\n\n    const assignToCongruent = (between: number, comparable: number) => {\n      if (hasTwoValues) {\n        if (comparable === from) {\n          this.state.from = between;\n        } else {\n          this.state.to = between;\n        }\n      } else {\n        this.state.from = between;\n      }\n    };\n\n    if (isBarMessage(message)) {\n      const { size, clickPoint } = message;\n\n      const newValue = this.normalizeValue((clickPoint * (end - start)) / size + start);\n\n      assignToNearest(newValue);\n\n      return this.sortValues();\n    }\n\n    if (isMoveMessage(message)) {\n      const { moveDirection, value } = message;\n\n      const specialCase = (modulo !== 0) && (value === end) && (moveDirection === -1);\n\n      const newValue = specialCase\n        ? end - modulo\n        : value + step * moveDirection;\n\n      assignToCongruent(this.normalizeValue(newValue), value);\n\n      return this.sortValues();\n    }\n\n    if (isScaleMessage(message)) {\n      const { scaleValue } = message;\n\n      assignToNearest(scaleValue);\n\n      return this.sortValues();\n    }\n\n    if (!isDragMessage(message)) {\n      this.state = { ...this.state, ...message };\n\n      return this.normalizeState();\n    }\n\n    const { innerOffset, wrapperSize, value } = message;\n\n    const newValue = this.normalizeValue((innerOffset * (end - start)) / wrapperSize + start);\n\n    assignToCongruent(newValue, value);\n\n    return this.sortValues();\n  }\n\n  normalizeState(): ModelState {\n    const {\n      from = 0,\n      to = 0,\n    } = this.state;\n\n    this.modulo = this.normalizeStep().getModulo();\n\n    this.state.from = this.normalizeValue(from);\n    this.state.to = this.normalizeValue(to);\n\n    return this.sortValues();\n  }\n\n  normalizeStep(): Model {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n\n    if (Math.abs(step) > Math.abs(end - start)) {\n      this.state.step = end - start;\n    } else {\n      const isCorrectStepSign = (end > start && step > 0) || (end < start && step < 0);\n\n      if (!isCorrectStepSign) {\n        this.state.step = -1 * step;\n      }\n    }\n\n    return this;\n  }\n\n  normalizeValue(raw: number): number {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n    const { modulo } = this;\n\n    if (start > end) {\n      if (raw > start) {\n        return start;\n      }\n\n      if (raw < end) {\n        return end;\n      }\n\n      if (step !== 0) {\n        if (raw < (end - modulo / 2)) {\n          return end;\n        }\n\n        if (raw < (end - modulo)) {\n          return end - modulo;\n        }\n\n        return start + step * Math.round((raw - start) / step);\n      }\n\n      return raw;\n    }\n\n    if (raw < start) {\n      return start;\n    }\n\n    if (raw > end) {\n      return end;\n    }\n\n    if (step !== 0) {\n      if (raw > (end - modulo / 2)) {\n        return end;\n      }\n\n      if (raw > (end - modulo)) {\n        return end - modulo;\n      }\n\n      return start + step * Math.round((raw - start) / step);\n    }\n\n    return raw;\n  }\n\n  sortValues(): ModelState {\n    const {\n      start = 0,\n      end = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n\n    if (hasTwoValues) {\n      if (start > end) {\n        if (from < to) {\n          [this.state.from, this.state.to] = [to, from];\n        }\n      } else if (from > to) {\n        [this.state.from, this.state.to] = [to, from];\n      }\n    }\n\n    return this.state;\n  }\n\n  getModulo(): number {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n\n    if (step === 0) {\n      return 0;\n    }\n\n    return end - start - step * Math.floor((end - start) / step);\n  }\n}\n\nfunction isDragMessage(message: Message): message is DragMessage {\n  return (message as DragMessage).innerOffset !== undefined;\n}\n\nfunction isBarMessage(message: Message): message is BarMessage {\n  return (message as BarMessage).size !== undefined;\n}\n\nfunction isMoveMessage(message: Message): message is MoveMessage {\n  return (message as MoveMessage).moveDirection !== undefined;\n}\n\nfunction isScaleMessage(message: Message): message is ScaleMessage {\n  return (message as ScaleMessage).scaleValue !== undefined;\n}\n","import $ from 'jquery';\n\nconst thumbHTML = '<div class=\"toxin-slider__thumb\" tabindex=\"0\"></div>';\nconst tooltipHTML = '<div class=\"toxin-slider__thumb-tooltip\"></div>';\n\nconst left = 37;\nconst up = 38;\nconst right = 39;\nconst down = 40;\n\nenum MoveDirection {\n  back = -1,\n  stop,\n  forward,\n}\n\nexport default class Thumb {\n  readonly $wrapper: JQuery;\n\n  readonly $thumb: JQuery;\n\n  readonly $tooltip: JQuery;\n\n  state: ThumbState = {\n    value: 0,\n    position: 0,\n    isVertical: false,\n    hidden: false,\n    tooltipHidden: false,\n    units: '',\n  };\n\n  drag: DragData = {\n    position: null as DragPosition,\n    innerOffset: 0,\n    wrapperPosition: 0,\n    wrapperSize: 0,\n    minRestriction: 0,\n    maxRestriction: 0,\n  };\n\n  /* This property describes thumb movement using the KEYBOARD\n  and is named using the word MOVE instead of DRAG by design. */\n  moveDirection: MoveDirection = MoveDirection.stop;\n\n  constructor(options: { $wrapper: JQuery; state: ThumbState }) {\n    const { $wrapper, state } = options;\n\n    this.$tooltip = $(tooltipHTML);\n    this.$thumb = $(thumbHTML).append(this.$tooltip);\n    this.$wrapper = $wrapper.append(this.$thumb);\n\n    this.$thumb.on('mousedown pointerdown', { thumb: this }, handleThumbMousedown);\n    this.$thumb.on('keydown', { thumb: this }, handleThumbKeydown);\n    this.$thumb.on('keyup', { thumb: this }, handleThumbKeyup);\n\n    this.update(state);\n  }\n\n  update(state: ThumbState): Thumb {\n    this.state = { ...this.state, ...state };\n\n    this.position();\n\n    this.$tooltip.text(`${new Intl.NumberFormat('ru-RU').format(state.value)}${state.units ?? ''}`);\n\n    if (state.hidden) {\n      this.$thumb.addClass('toxin-slider__thumb_hidden');\n    } else {\n      this.$thumb.removeClass('toxin-slider__thumb_hidden');\n    }\n\n    if (state.tooltipHidden) {\n      this.$tooltip.addClass('toxin-slider__thumb-tooltip_hidden');\n    } else {\n      this.$tooltip.removeClass('toxin-slider__thumb-tooltip_hidden');\n    }\n\n    return this;\n  }\n\n  getPosition(): number {\n    return this.drag.position === null ? this.state.position : this.drag.position;\n  }\n\n  getDirection(): MoveDirection {\n    return this.moveDirection;\n  }\n\n  sendDragMessage(): Thumb {\n    this.$thumb.trigger(\n      'toxin-slider.update',\n      {\n        innerOffset: this.drag.innerOffset,\n        wrapperSize: this.drag.wrapperSize,\n        value: this.state.value,\n      },\n    );\n\n    return this;\n  }\n\n  sendMoveMessage(): Thumb {\n    this.$thumb.trigger(\n      'toxin-slider.update',\n      {\n        moveDirection: this.getDirection(),\n        value: this.state.value,\n      },\n    );\n\n    return this;\n  }\n\n  private position(): Thumb {\n    const axis = this.state.isVertical ? 'Y' : 'X';\n    const position = this.getPosition();\n\n    this.$thumb.css('transform', `translate${axis}(${\n      axis === 'X' ? (position - 100) : (-1 * position)\n    }%)`);\n\n    return this;\n  }\n}\n\nfunction handleThumbMousedown(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const {\n    $thumb,\n    $wrapper,\n    state,\n    drag,\n  } = thumb;\n\n  if (state.isVertical) {\n    drag.wrapperPosition = $wrapper.offset()?.top ?? 0;\n    drag.wrapperSize = $wrapper.outerHeight() ?? 0;\n  } else {\n    drag.wrapperPosition = $wrapper.offset()?.left ?? 0;\n    drag.wrapperSize = $wrapper.outerWidth() ?? 0;\n  }\n\n  const thumbPosition = state.isVertical\n    ? ($thumb.offset()?.top ?? 0)\n    : ($thumb.offset()?.left ?? 0);\n\n  const thumbSize = state.isVertical\n    ? ($thumb.outerHeight() ?? 0)\n    : ($thumb.outerWidth() ?? 0);\n\n  const mousePosition = state.isVertical\n    ? (event.clientY ?? 0)\n    : (event.clientX ?? 0);\n\n  const grabPoint = mousePosition - thumbPosition - thumbSize;\n\n  drag.minRestriction = grabPoint + drag.wrapperPosition;\n  drag.maxRestriction = drag.minRestriction + drag.wrapperSize;\n\n  drag.innerOffset = state.isVertical\n    ? drag.wrapperPosition - thumbPosition\n    : thumbPosition + thumbSize - drag.wrapperPosition;\n\n  $(document).on('mousemove pointermove', { thumb }, handleThumbMousemove);\n  $(document).on('mouseup pointerup', { thumb }, handleThumbMouseup);\n\n  $wrapper.addClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbMousemove(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { state, drag } = thumb;\n\n  const mousePosition = state.isVertical\n    ? (event.clientY ?? 0)\n    : (event.clientX ?? 0);\n\n  if (mousePosition < drag.minRestriction) {\n    drag.innerOffset = state.isVertical\n      ? drag.wrapperSize\n      : 0;\n  } else if (mousePosition > drag.maxRestriction) {\n    drag.innerOffset = state.isVertical\n      ? 0\n      : drag.wrapperSize;\n  } else {\n    drag.innerOffset = state.isVertical\n      ? drag.maxRestriction - mousePosition\n      : mousePosition - drag.minRestriction;\n  }\n\n  drag.position = (100 * drag.innerOffset) / drag.wrapperSize;\n\n  thumb.sendDragMessage();\n}\n\nfunction handleThumbMouseup(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { drag, $wrapper } = thumb;\n\n  $(document).off('mousemove pointermove', handleThumbMousemove);\n  $(document).off('mouseup pointerup', handleThumbMouseup);\n\n  drag.position = null;\n\n  thumb.sendDragMessage();\n\n  $wrapper.removeClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbKeydown(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { $wrapper } = thumb;\n  const { keyCode } = event;\n\n  if (keyCode === up || keyCode === right) {\n    thumb.moveDirection = MoveDirection.forward;\n  } else if (keyCode === down || keyCode === left) {\n    thumb.moveDirection = MoveDirection.back;\n  }\n\n  if (thumb.getDirection() !== MoveDirection.stop) {\n    event.preventDefault();\n    thumb.sendMoveMessage();\n  }\n\n  $wrapper.addClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbKeyup(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { $wrapper } = thumb;\n\n  thumb.moveDirection = MoveDirection.stop;\n\n  $wrapper.removeClass('toxin-slider__inner-wrapper_draggable');\n}\n","import $ from 'jquery';\n\nconst progressBarHTML = '<div class=\"toxin-slider__progress-bar\"></div>';\n\nexport default class ProgressBar {\n  readonly $progressBar: JQuery;\n\n  constructor(options: { $wrapper: JQuery; state: ProgressBarState }) {\n    const { $wrapper, state } = options;\n\n    this.$progressBar = $(progressBarHTML);\n    $wrapper.append(this.$progressBar);\n\n    this.update(state);\n  }\n\n  update(state: ProgressBarState): ProgressBar {\n    this.$progressBar.css(\n      'transform',\n      state.isVertical\n        ? `translate(-50%, ${100 - state.max}%) scaleY(${state.max - state.min}%)`\n        : `translate(${state.min}%, -50%) scaleX(${state.max - state.min}%)`,\n    );\n\n    if (state.hidden) {\n      this.$progressBar.addClass('toxin-slider__progress-bar_hidden');\n    } else {\n      this.$progressBar.removeClass('toxin-slider__progress-bar_hidden');\n    }\n\n    return this;\n  }\n}\n","import $ from 'jquery';\n\n/* This constant should be duplicated in the stylesheet ./toxin-slider.scss: $thumb-length\nand the test file ../test/bar.test.ts: const thumbLength */\nconst thumbLength = 16;\n\nconst halfThumbLength = thumbLength / 2;\n\nconst barHTML = '<div class=\"toxin-slider__bar\"></div>';\n\nexport default class Bar {\n  readonly $bar: JQuery;\n\n  isVertical = false;\n\n  constructor(options: { $wrapper: JQuery, isVertical: boolean }) {\n    const { $wrapper, isVertical } = options;\n\n    this.$bar = $(barHTML);\n    $wrapper.append(this.$bar);\n\n    this.$bar.on('mousedown', { bar: this }, handleBarMousedown);\n\n    this.update(isVertical);\n  }\n\n  update(isVertical: boolean) {\n    this.isVertical = isVertical;\n\n    return this;\n  }\n}\n\nfunction handleBarMousedown(event: JQuery.TriggeredEvent) {\n  const { bar } = event.data as { bar: Bar };\n  const { $bar, isVertical } = bar;\n\n  const size = isVertical\n    ? ($bar.outerHeight() ?? 0)\n    : ($bar.outerWidth() ?? 0);\n\n  const clickPoint = isVertical\n    ? ($bar.offset()?.top ?? 0) - window.scrollY + size - (event?.clientY ?? 0)\n    : (event?.clientX ?? 0) + window.scrollX - ($bar.offset()?.left ?? 0);\n\n  $bar.trigger('toxin-slider.update', {\n    size: normalizeSize(),\n    clickPoint: normalizeClickPoint(),\n  });\n\n  function normalizeSize(): number {\n    return size - thumbLength;\n  }\n\n  function normalizeClickPoint(): number {\n    if (clickPoint < halfThumbLength) {\n      return 0;\n    }\n\n    if (clickPoint > size - halfThumbLength) {\n      return size - thumbLength;\n    }\n\n    return clickPoint - halfThumbLength;\n  }\n}\n","import $ from 'jquery';\n\nconst scaleHTML = '<div class=\"toxin-slider__scale\"></div>';\nconst itemHTML = '<div class=\"toxin-slider__scale-item\"></div>';\nconst valueHTML = '<div class=\"toxin-slider__scale-value js-toxin-slider__scale-value\"></div>';\nconst innerWrapperHTML = '<div class=\"toxin-slider__scale-inner-wrapper\"></div>';\n\nexport default class Scale {\n  readonly $scale: JQuery;\n\n  state: ScaleState = {\n    start: NaN,\n    end: NaN,\n    step: NaN,\n    hidden: false,\n    units: '',\n  };\n\n  constructor(options: { $wrapper: JQuery; state: ScaleState }) {\n    const { $wrapper, state } = options;\n\n    this.$scale = $(scaleHTML);\n    $wrapper.append(this.$scale);\n\n    this.$scale.on(\n      'mousedown',\n      '.toxin-slider__scale-value',\n      { $scale: this.$scale },\n      handleScaleMousedown,\n    );\n\n    this.update(state);\n  }\n\n  update(state: ScaleState) {\n    const scaleChange = (\n      (this.state.start !== state.start)\n      || (this.state.end !== state.end)\n      || (this.state.step !== state.step)\n    );\n\n    if (scaleChange) {\n      this.$scale.empty().append(getInnerScale(state));\n      this.state = { ...this.state, ...state };\n    }\n\n    if (state.hidden) {\n      this.$scale.addClass('toxin-slider__scale_hidden');\n    } else {\n      this.$scale.removeClass('toxin-slider__scale_hidden');\n    }\n  }\n}\n\nfunction handleScaleMousedown(event: JQuery.TriggeredEvent) {\n  const { $scale } = event.data as { $scale: JQuery };\n  const scaleValue = Number($(event.target).attr('data-value'));\n\n  $scale.trigger('toxin-slider.update', { scaleValue });\n}\n\nfunction getInnerScale(options: {\n  start: number;\n  end: number;\n  step: number;\n  units?: string;\n}): JQuery {\n  const {\n    start,\n    end,\n    step,\n    units = '',\n  } = options;\n\n  /* If the step is zero, the scale consists of extreme values only */\n  const scaleStep = step === 0 ? end - start : step;\n\n  const modulo = step === 0 ? 0 : end - start - step * Math.floor((end - start) / step);\n\n  let cycleValue = start;\n  const $innerScale = $(innerWrapperHTML)\n    .append(\n      $(itemHTML)\n        .append(\n          $(valueHTML)\n            .text(\n              `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n            )\n            .attr('data-value', cycleValue),\n        )\n        // an invisible element is needed as a spacer\n        .append(\n          $(valueHTML)\n            .text(\n              `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n            )\n            .addClass('toxin-slider__scale-value_invisible'),\n        )\n        .css(\n          {\n            'flex-grow': Math.abs(scaleStep),\n            'flex-basis': '0',\n          },\n        ),\n    );\n\n  let i = 1;\n\n  do {\n    cycleValue = start + scaleStep * i;\n\n    const $item = $(itemHTML);\n\n    const specialCase = (cycleValue === end - modulo) && (cycleValue !== end);\n    const outOfScale = (\n      cycleValue > start && cycleValue > end\n    ) || (\n      cycleValue < start && cycleValue < end\n    );\n\n    if (specialCase) {\n      $item\n        .addClass('toxin-slider__scale-item_penult')\n        .css(\n          {\n            'flex-grow': Math.abs(scaleStep),\n            'flex-basis': '0',\n          },\n        );\n    } else if (cycleValue === end) {\n      $item.css({\n        'flex-grow': Math.abs(scaleStep),\n        'flex-basis': '0',\n      });\n    } else if (outOfScale) {\n      cycleValue = end;\n      $item.css({\n        'flex-grow': Math.abs(2 * modulo),\n        'flex-basis': '0',\n      });\n    } else {\n      $item.css({\n        'flex-grow': Math.abs(2 * scaleStep),\n        'flex-basis': '0',\n      });\n    }\n\n    // an invisible element is needed as a spacer\n    if (cycleValue === end) {\n      $item.append(\n        $(valueHTML)\n          .text(\n            `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n          )\n          .addClass('toxin-slider__scale-value_invisible'),\n      );\n    }\n\n    $innerScale\n      .append(\n        $item\n          .append(\n            $(valueHTML)\n              .text(\n                `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n              )\n              .attr('data-value', cycleValue),\n          ),\n      );\n\n    i += 1;\n  } while (cycleValue !== end);\n\n  return $innerScale;\n}\n","import $ from 'jquery';\n\nimport Thumb from './thumb';\nimport ProgressBar from './progress-bar';\nimport Bar from './bar';\nimport Scale from './scale';\n\nconst toxinSliderHTML = '<div class=\"toxin-slider js-toxin-slider\"></div>';\nconst innerWrapperHTML = '<div class=\"toxin-slider__inner-wrapper\"></div>';\nconst inputHTML = '<input type=\"number\" class=\"toxin-slider__input\">';\n\nexport default class View {\n  readonly $toxinSlider: JQuery;\n\n  readonly $from: JQuery;\n\n  readonly $to: JQuery;\n\n  thumbA: Thumb;\n\n  thumbB: Thumb;\n\n  readonly progressBar: ProgressBar;\n\n  readonly scale: Scale;\n\n  readonly bar: Bar;\n\n  state: ViewState = {\n    start: 0,\n    end: 0,\n    step: 0,\n    from: 0,\n    to: 0,\n    hasTwoValues: false,\n    isVertical: false,\n    progressBarHidden: false,\n    scaleHidden: false,\n    tooltipHidden: false,\n    units: '',\n    name: 'undefined-name',\n  };\n\n  constructor(options: { $outerWrapper: JQuery, state: ViewState }) {\n    const { $outerWrapper, state } = options;\n\n    this.state = { ...this.state, ...state };\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n      isVertical = false,\n      progressBarHidden = false,\n      tooltipHidden = false,\n      scaleHidden = false,\n      units = '',\n      name = 'undefined-name',\n    } = this.state;\n\n    const $innerWrapper = $(innerWrapperHTML);\n\n    const { min, max } = this.calculateRange();\n\n    this.thumbA = new Thumb({\n      $wrapper: $innerWrapper,\n      state: {\n        isVertical,\n        tooltipHidden,\n        units,\n        value: from,\n        position: min,\n        hidden: !hasTwoValues,\n      },\n    });\n\n    this.thumbB = new Thumb({\n      $wrapper: $innerWrapper,\n      state: {\n        isVertical,\n        tooltipHidden,\n        units,\n        value: hasTwoValues ? to : from,\n        position: max,\n        hidden: false,\n      },\n    });\n\n    this.progressBar = new ProgressBar({\n      $wrapper: $innerWrapper,\n      state: {\n        min,\n        max,\n        isVertical,\n        hidden: progressBarHidden,\n      },\n    });\n\n    this.$toxinSlider = $(toxinSliderHTML);\n\n    if (!hasTwoValues && !progressBarHidden) {\n      this.$toxinSlider.addClass('toxin-slider_range_single');\n    }\n\n    if (isVertical) {\n      this.$toxinSlider.addClass('toxin-slider_direction_vertical');\n    }\n\n    this.bar = new Bar({\n      isVertical,\n      $wrapper: this.$toxinSlider,\n    });\n\n    this.$from = $(inputHTML)\n      .attr('name', `${name}-from`)\n      .val(from);\n    this.$to = $(inputHTML)\n      .attr('name', `${name}-to`)\n      .val(to);\n\n    this.$toxinSlider\n      .append($innerWrapper)\n      .append(this.$from)\n      .append(this.$to);\n\n    this.scale = new Scale({\n      $wrapper: this.$toxinSlider,\n      state: {\n        start,\n        end,\n        step,\n        units,\n        hidden: scaleHidden,\n      },\n    });\n\n    $outerWrapper.append(this.$toxinSlider);\n\n    this.$toxinSlider.trigger('toxin-slider.slide', this.state);\n  }\n\n  update(state: ViewState): View {\n    this.state = { ...this.state, ...state };\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n      isVertical = false,\n      progressBarHidden = false,\n      tooltipHidden = false,\n      scaleHidden = false,\n      units = '',\n    } = this.state;\n\n    this.$from.val(from);\n    this.$to.val(to);\n\n    if (!hasTwoValues && !progressBarHidden) {\n      this.$toxinSlider.addClass('toxin-slider_range_single');\n    } else {\n      this.$toxinSlider.removeClass('toxin-slider_range_single');\n    }\n\n    if (isVertical) {\n      this.$toxinSlider.addClass('toxin-slider_direction_vertical');\n    } else {\n      this.$toxinSlider.removeClass('toxin-slider_direction_vertical');\n    }\n\n    const { min, max } = this.sortThumbs().calculateRange();\n    const {\n      thumbA,\n      thumbB,\n      progressBar,\n      bar,\n      scale,\n    } = this;\n\n    thumbA.update({\n      isVertical,\n      tooltipHidden,\n      units,\n      value: from,\n      position: min,\n      hidden: !hasTwoValues,\n    });\n\n    thumbB.update({\n      isVertical,\n      tooltipHidden,\n      units,\n      value: hasTwoValues ? to : from,\n      position: max,\n      hidden: false,\n    });\n\n    progressBar.update({\n      isVertical,\n      min: thumbA.getPosition(),\n      max: thumbB.getPosition(),\n      hidden: progressBarHidden,\n    });\n\n    bar.update(isVertical);\n\n    scale.update({\n      start,\n      end,\n      step,\n      units,\n      hidden: scaleHidden,\n    });\n\n    return this;\n  }\n\n  calculateRange(): { min: number; max: number; } {\n    const {\n      start = 0,\n      end = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n\n    const scope = end - start;\n\n    if (scope === 0) {\n      return {\n        min: 0,\n        max: 0,\n      };\n    }\n\n    const min = hasTwoValues\n      ? (100 * (from - start)) / scope\n      : 0;\n\n    const max = hasTwoValues\n      ? (100 * (to - start)) / scope\n      : (100 * (from - start)) / scope;\n\n    return { min, max };\n  }\n\n  sortThumbs(): View {\n    const { hasTwoValues = false } = this.state;\n    const { thumbA, thumbB } = this;\n\n    if (hasTwoValues) {\n      if (thumbA.getPosition() > thumbB.getPosition()) {\n        [this.thumbA, this.thumbB] = [thumbB, thumbA];\n      } else if (thumbA.getPosition() === thumbB.getPosition()) {\n        if (thumbA.getDirection() > thumbB.getDirection()) {\n          [this.thumbA, this.thumbB] = [thumbB, thumbA];\n        }\n      }\n    }\n\n    return this;\n  }\n}\n","import Model from './model';\nimport View from './view';\n\nexport default class Controller {\n  readonly model;\n\n  readonly view;\n\n  constructor(options: { model: Model, view: View }) {\n    const { model, view } = options;\n    const { $toxinSlider } = view;\n\n    this.model = model;\n    this.view = view;\n\n    $toxinSlider.on('toxin-slider.update', { model, view }, handleSliderUpdate);\n  }\n}\n\nfunction handleSliderUpdate(event: JQuery.TriggeredEvent, message: Message) {\n  const { model, view } = event.data as { model: Model; view: View };\n  const { $toxinSlider } = view;\n\n  view.update({ ...view.state, ...model.update(message) });\n\n  $toxinSlider.trigger('toxin-slider.slide', view.state);\n}\n","import $ from 'jquery';\n\nimport 'toxin-slider/toxin-slider.ts';\nimport 'toxin-slider/toxin-slider.scss';\n\nfunction handleSlide(event, { from, to }) {\n  event.data.$value\n    .text(\n      `${new Intl.NumberFormat('ru-RU').format(from)}₽ - ${new Intl.NumberFormat('ru-RU').format(to)}₽`,\n    );\n}\n\n$('.js-slider-toxin').each((index, slider) => {\n  const $slider = $(slider);\n  const $value = $('.js-slider-toxin__value', $slider);\n  $('.js-slider-toxin__body', $(slider))\n    .on(\n      'toxin-slider.slide',\n      { $value },\n      handleSlide,\n    )\n    .toxinSlider({\n      start: parseFloat(slider.dataset.start),\n      end: parseFloat(slider.dataset.end),\n      step: parseFloat(slider.dataset.step),\n      from: parseFloat(slider.dataset.from),\n      to: parseFloat(slider.dataset.to),\n      hasTwoValues: true,\n      scaleHidden: true,\n      tooltipHidden: true,\n      name: slider.dataset.name,\n    });\n});\n","import $ from 'jquery';\n\nimport Model from './model';\nimport View from './view';\nimport Controller from './controller';\n\n$.fn.toxinSlider = function toxinSlider(this: JQuery, state: ViewState): JQuery {\n  return this.each((index, outerWrapper) => {\n    const $outerWrapper = $(outerWrapper);\n    const $toxinSlider = $('.js-toxin-slider', $outerWrapper);\n\n    if ($toxinSlider.length > 0) {\n      $toxinSlider.trigger('toxin-slider.update', state);\n    } else {\n      const { name = '' } = state;\n      const sliderName = index > 0 ? `${name}-${index}` : name;\n      const sliderState = { ...state, ...{ name: sliderName } };\n\n      const model = new Model(sliderState);\n\n      const view = new View({\n        $outerWrapper,\n        state: model.state,\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const controller = new Controller({ model, view });\n    }\n  });\n};\n","import $ from 'jquery';\n\nclass Subscription {\n  #$subscription;\n\n  $email;\n\n  $submit;\n\n  constructor(subscription) {\n    this.#$subscription = $(subscription);\n  }\n\n  init() {\n    this.$email = $('.js-subscription__input', this.#$subscription);\n    this.$submit = $('.js-subscription__button', this.#$subscription);\n\n    this.$email\n      .on(\n        'input',\n        null,\n        { $email: this.$email, $submit: this.$submit },\n        handleEmailInput,\n      );\n\n    return this;\n  }\n}\n\nfunction isEmailValid(email) {\n  return String(email)\n    .toLowerCase()\n    .match(\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n    );\n}\n\nfunction handleEmailInput(event) {\n  const {\n    $email,\n    $submit,\n  } = event.data;\n\n  $submit.prop('disabled', !isEmailValid($email.val()));\n}\n\n$('.js-subscription').each((index, subscription) => {\n  const jsSubscription = new Subscription(subscription);\n  jsSubscription.init();\n});\n","import $ from 'jquery';\n\nclass TextField {\n  #$textField;\n\n  $double;\n\n  $dateInput;\n\n  preValue;\n\n  constructor(textField) {\n    this.#$textField = $(textField);\n  }\n\n  init() {\n    $('.js-text-field__input', this.#$textField)\n      .attr('placeholder', '')\n      .on('input', null, { textField: this }, handleInputInput)\n      .on('change focusout', null, { textField: this }, handleInputChange)\n      .on('paste', handleInputPaste);\n\n    const name = this.#$textField.data('name');\n\n    $('.js-text-field__wrapper', this.#$textField)\n      .append(`\n        <input\n          type=\"text\"\n          class=\"text-field__input text-field__input_double js-text-field__input_double\"\n          disabled\n          placeholder=\"ДД.ММ.ГГГГ\"\n        >\n        <input\n          type=\"date\"\n          class=\"text-field__date js-text-field__date\"\n          name=\"${name}-date\"\n        >`);\n\n    this.$double = $('.js-text-field__input_double', this.#$textField);\n    this.$dateInput = $('.js-text-field__date', this.#$textField);\n\n    this.preValue = '';\n\n    return this;\n  }\n\n  setPreValue(value) {\n    this.preValue = value;\n\n    return this;\n  }\n}\n\nfunction getPlaceholder(value) {\n  const placeholder = 'ДД.ММ.ГГГГ'.split('');\n\n  value.split('').forEach((symbol, index) => {\n    placeholder[index] = symbol;\n  });\n\n  return placeholder.join('');\n}\n\nfunction isCorrectDate(options = {}) {\n  const { days = '', month = '', year = '' } = options;\n\n  const daysNumber = days !== ''\n    ? parseInt(days, 10)\n    : 0;\n\n  const isCorrectDays = (days !== '00') && daysNumber < 32;\n\n  if (!isCorrectDays) {\n    return false;\n  }\n\n  const monthNumber = month !== ''\n    ? parseInt(month, 10)\n    : 0;\n\n  const isCorrectMonth = (month !== '00') && monthNumber < 13;\n\n  if (!isCorrectMonth) {\n    return false;\n  }\n\n  const yearTooShort = (year === '')\n    || (year.match(/^(19|20)$/) !== null)\n    || year.length === 1\n    || year.length === 3;\n\n  const yearNumber = (() => {\n    if (yearTooShort) {\n      return 0;\n    }\n\n    if (year.length === 2) {\n      if (parseInt(year, 10) < 30) {\n        return parseInt(`20${year}`, 10);\n      }\n\n      return parseInt(`19${year}`, 10);\n    }\n\n    return parseInt(year, 10);\n  })();\n\n  const isCorrectFebruary = (monthNumber !== 2)\n    || (daysNumber < 29)\n    || ((daysNumber < 30) && (yearNumber % 4 === 0 && yearNumber !== 1900));\n\n  if (!isCorrectFebruary) {\n    return false;\n  }\n\n  return (daysNumber < 31) || ![4, 6, 9, 11].includes(monthNumber);\n}\n\nfunction handleInputPaste(event) {\n  event.preventDefault();\n}\n\nfunction handleInputInput(event) {\n  const input = event.target;\n  const $input = $(input);\n\n  // Deleting a character is considered correct if dots inside the string are not deleted.\n  const correctIncompleteDeletion = /^(\\d{0,2}\\.?|\\d{0,2}\\.\\d{0,2}\\.?|\\d{0,2}\\.\\d{0,2}\\.\\d{0,4})$/;\n\n  const correctIncompleteInput = /^(\\d{0,3}|\\d{0,2}\\.\\d{1,3}|\\d{0,2}\\.\\d{0,2}\\.\\d{1,4})$/;\n\n  $input.removeClass('text-field__input_invalid');\n\n  let selectPos = input.selectionStart;\n\n  let value = $input.val();\n\n  const { preValue, $double } = event.data.textField;\n\n  if (preValue.length > value.length) {\n    if (value.match(correctIncompleteDeletion) === null) {\n      value = preValue; // prevent deletion of dots within a string\n    } else {\n      value = value.replace(/\\.$/, ''); // remove dots at the end of a string, if one - one\n      value = value.replace(/\\.$/, ''); // if 2 - both\n    }\n  } else if (value.match(correctIncompleteInput) === null) {\n    value = preValue; // prohibition of incorrect input\n    selectPos -= 1;\n  } else {\n    const tooManyDaysRegExp = /^(3[2-9]|[4-9]\\d)$/;\n    const tooManyMonthsRegExp = /^\\d{0,2}\\.(1[3-9]|[2-9]\\d)$/;\n    const isFirstDigitMonthRegExp = /^\\d{3}$/;\n    const isFirstDigitYearRegExp = /^\\d{0,2}\\.\\d{3}$/;\n\n    const tooManyDays = value.match(tooManyDaysRegExp) !== null;\n    const tooManyMonths = value.match(tooManyMonthsRegExp) !== null;\n    const isFirstDigitMonth = value.match(isFirstDigitMonthRegExp) !== null;\n    const isFirstDigitYear = value.match(isFirstDigitYearRegExp) !== null;\n\n    const { length } = value;\n\n    const days = (() => {\n      if (tooManyDays) {\n        return `0${value[0]}`;\n      }\n\n      if (isFirstDigitMonth) {\n        return value.slice(0, 2);\n      }\n\n      return value.split('.')[0];\n    })();\n\n    const month = (() => {\n      if (tooManyDays) {\n        return value[1];\n      }\n\n      if (isFirstDigitMonth) {\n        return value[2];\n      }\n\n      if (tooManyMonths) {\n        return `0${value[length - 2]}`;\n      }\n\n      if (isFirstDigitYear) {\n        return value.slice(length - 3, length - 1);\n      }\n\n      // the value 'undefined' will not result in an error\n      return value.split('.')[1];\n    })();\n\n    const year = (() => {\n      if (tooManyMonths || isFirstDigitYear) {\n        return value[length - 1];\n      }\n\n      // the value 'undefined' will not result in an error\n      return value.split('.')[2];\n    })();\n\n    if (isCorrectDate({ days, month, year })) {\n      // the number of the substring in which the digit has just been entered\n      // 0 - days, 1 - month, 2 - year\n      const lastEditedSubstring = (() => {\n        if (tooManyDays || isFirstDigitMonth) {\n          return 1;\n        }\n\n        if (tooManyMonths || isFirstDigitYear) {\n          return 2;\n        }\n\n        return (value.slice(0, selectPos).match(/\\./g) ?? []).length;\n      })();\n\n      const needZeroToDays = days.match(/^[4-9]$/) !== null;\n\n      const needZeroToMonth = month !== undefined\n        ? month.match(/^[2-9]$/) !== null\n        : false;\n\n      const needTwoDigitsToYear = year !== undefined\n        ? year.match(/^(0\\d?|1[0-8]|2[1-9]|[3-9]\\d?)$/) !== null\n        : false;\n\n      const newValue = [];\n\n      newValue.push(needZeroToDays ? `0${days}` : days);\n\n      if (month !== undefined) {\n        newValue.push(needZeroToMonth ? `0${month}` : month);\n      }\n\n      if (year !== undefined) {\n        if (needTwoDigitsToYear) {\n          if (year.match(/^[3-9]\\d?$/) !== null) {\n            newValue.push(`19${year}`);\n          } else {\n            newValue.push(`20${year}`);\n          }\n        } else {\n          newValue.push(year);\n        }\n      }\n\n      const addPosition = (() => {\n        // just a list of all possible options\n\n        if (lastEditedSubstring === 0) {\n          if (needZeroToDays) {\n            return 1;\n          }\n\n          return 0;\n        }\n\n        if (lastEditedSubstring === 1) {\n          if (tooManyDays && needZeroToMonth) {\n            return 3;\n          }\n\n          if (tooManyDays) {\n            return 2;\n          }\n\n          if (isFirstDigitMonth && needZeroToMonth) {\n            return 2;\n          }\n\n          if (isFirstDigitMonth) {\n            return 1;\n          }\n\n          if (needZeroToDays && needZeroToMonth) {\n            return 2;\n          }\n\n          if (needZeroToDays || needZeroToMonth) {\n            return 1;\n          }\n\n          return 0;\n        }\n\n        const total = tooManyMonths && needZeroToDays && needTwoDigitsToYear;\n\n        if (total) {\n          return 5;\n        }\n\n        if (tooManyMonths && needZeroToDays) {\n          return 3;\n        }\n\n        if (tooManyMonths && needTwoDigitsToYear) {\n          return 4;\n        }\n\n        if (tooManyMonths) {\n          return 2;\n        }\n\n        const secondTotal = isFirstDigitYear && needZeroToDays && needTwoDigitsToYear;\n\n        if (secondTotal) {\n          return 4;\n        }\n\n        if (isFirstDigitYear && needZeroToDays) {\n          return 2;\n        }\n\n        if (isFirstDigitYear && needTwoDigitsToYear) {\n          return 3;\n        }\n\n        if (isFirstDigitYear) {\n          return 1;\n        }\n\n        const thirdTotal = needZeroToDays && needZeroToMonth && needTwoDigitsToYear;\n\n        if (thirdTotal) {\n          return 4;\n        }\n\n        if (needZeroToDays && needZeroToMonth) {\n          return 2;\n        }\n\n        if (needZeroToDays && needTwoDigitsToYear) {\n          return 3;\n        }\n\n        if (needZeroToMonth && needTwoDigitsToYear) {\n          return 3;\n        }\n\n        if (needZeroToDays || needZeroToMonth) {\n          return 1;\n        }\n\n        if (needTwoDigitsToYear) {\n          return 2;\n        }\n\n        return 0;\n      })();\n\n      value = newValue.join('.');\n      selectPos += addPosition;\n    } else {\n      value = preValue; // prevent wrong date input\n      selectPos -= 1;\n    }\n  }\n\n  $input.val(value);\n  $double.attr('placeholder', getPlaceholder(value));\n\n  input.setSelectionRange(selectPos, selectPos);\n\n  event.data.textField.setPreValue(value);\n}\n\nfunction handleInputChange(event) {\n  const $input = $(event.target);\n\n  const value = $input.val();\n  const dateValue = value.split('.').reverse().join('-');\n\n  const { $dateInput } = event.data.textField;\n\n  const isCorrectValue = value.match(/^\\d{2}\\.\\d{2}\\.\\d{4}$/)\n    && !Number.isNaN(Date.parse(dateValue));\n\n  const isEmptyValue = value === '';\n\n  if (isCorrectValue || isEmptyValue) {\n    $input.removeClass('text-field__input_invalid');\n\n    $dateInput.val(dateValue);\n  } else {\n    $input.addClass('text-field__input_invalid');\n  }\n}\n\n$('.js-text-field_type_date').each((index, field) => {\n  const textField = new TextField(field);\n  textField.init();\n});\n","import $ from 'jquery';\n\nconst enter = 13;\nconst spaceBar = 32;\n\n$(document).on('keydown', '.toggle__button', handleToggleKeydown);\n\nfunction handleToggleKeydown(event) {\n  if (event.keyCode === enter || event.keyCode === spaceBar) {\n    event.preventDefault();\n\n    const $toggle = $(event.target);\n\n    const checked = $toggle.prop('checked');\n\n    $toggle.prop('checked', !checked);\n  }\n}\n","export default __webpack_public_path__ + \"assets/favicons/android-chrome-192x192.png\";","export default __webpack_public_path__ + \"assets/favicons/android-chrome-512x512.png\";","export default __webpack_public_path__ + \"assets/favicons/apple-touch-icon.png\";","export default __webpack_public_path__ + \"assets/favicons/browserconfig.xml\";","export default __webpack_public_path__ + \"assets/favicons/favicon-16x16.png\";","export default __webpack_public_path__ + \"assets/favicons/favicon-32x32.png\";","export default __webpack_public_path__ + \"assets/favicons/favicon.ico\";","export default __webpack_public_path__ + \"assets/favicons/mstile-144x144.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-150x150.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-310x150.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-310x310.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-70x70.png\";","export default __webpack_public_path__ + \"assets/favicons/safari-pinned-tab.svg\";","export default __webpack_public_path__ + \"assets/favicons/site.webmanifest\";"],"names":["faviconsContext","keys","forEach","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","Object","resolve","module","exports","document","on","event","keyCode","preventDefault","$checkbox","target","checked","prop","type","$expand","toggleClass","months","shortMonths","Datepicker","$datepicker","$arrival","$departure","$dropFilter","$dropArrival","$dropDeparture","$back","$monthYear","$calendar","$clear","$confirm","today","cursorDate","calendarMonth","constructor","datepicker","this","init","handleDatepickerKeydown","hasClass","handleDatepickerFocusin","handleDatepickerMousedown","stop","val","handleArrivalMousedown","handleDepartureMousedown","handleBackMousedown","handleForwardMousedown","handleCellClick","handleClearMousedown","handleConfirmMousedown","now","Date","getFullYear","getMonth","getDate","update","arrival","departure","dateArrival","dateDeparture","setHours","hasPeriod","text","split","reverse","join","attr","cycleDate","dayOfWeek","getDay","setDate","calendarHTML","i","cellClasses","cellPeriod","getTime","getDateString","html","date","trigger","data","close","eventIN","closeIN","datepickerIN","$datepickerIN","removeClass","window","off","addClass","stopPropagation","temp","setFullYear","month","setMonth","zeroMonth","zeroDate","each","index","Dropdown","$dropdown","$drop","$quantities","dropdown","handleDropdownMousedown","handleDropdownInput","handleDropdownFocusin","item","$item","$quantity","handleQuantityKeydown","$minus","handleMinusMousedown","$plus","handlePlusMousedown","handleQuantityInput","handleCounterButtonMouseup","dropdownIN","$dropdownIN","quantities","get","isEmpty","isEnough","reduceRight","previous","input","$input","quantity","surplus","nominative","genitive","genitivePlural","min","parseInt","thisValue","value","undefined","lastTwoDigits","lastDigit","genitivePluralValue","numberItems","common","reduce","maxNumberItems","$button","minus","timerID","setTimeout","fastMinus","max","plus","fastPlus","clearTimeout","clearInterval","valusString","valueNumber","match","replace","valueString","isCorrect","length","triggerHandler","setInterval","Like","$like","$number","like","handleLikeMousedown","handleLikeKeydown","activate","number","Paginator","$paginator","$description","active","paginator","handleItemKeydown","handleItemMousedown","back","setActive","forward","Rate","$rate","rating","rate","handleStarMouseover","handleStarMouseout","handleStarMousedown","handleRateKeydown","append","setRating","newRating","Model","state","start","end","step","from","to","hasTwoValues","modulo","message","assignToNearest","between","Math","abs","assignToCongruent","comparable","size","isBarMessage","clickPoint","normalizeValue","sortValues","moveDirection","isMoveMessage","newValue","scaleValue","isScaleMessage","innerOffset","isDragMessage","normalizeState","wrapperSize","normalizeStep","getModulo","raw","round","floor","MoveDirection","Thumb","options","position","isVertical","hidden","tooltipHidden","units","drag","wrapperPosition","minRestriction","maxRestriction","$wrapper","$tooltip","$thumb","thumb","handleThumbMousedown","handleThumbKeydown","handleThumbKeyup","Intl","NumberFormat","format","getPosition","getDirection","sendDragMessage","sendMoveMessage","axis","css","offset","top","outerHeight","left","outerWidth","thumbPosition","thumbSize","grabPoint","clientY","clientX","handleThumbMousemove","handleThumbMouseup","mousePosition","ProgressBar","$progressBar","Bar","$bar","bar","handleBarMousedown","scrollY","scrollX","thumbLength","normalizeClickPoint","itemHTML","valueHTML","innerWrapperHTML","Scale","NaN","$scale","handleScaleMousedown","empty","scaleStep","cycleValue","$innerScale","outOfScale","getInnerScale","Number","inputHTML","View","progressBarHidden","scaleHidden","name","$outerWrapper","$innerWrapper","calculateRange","thumbA","thumbB","progressBar","$toxinSlider","$from","$to","scale","sortThumbs","scope","Controller","model","view","handleSliderUpdate","handleSlide","$value","outerWrapper","sliderName","sliderState","slider","$slider","toxinSlider","parseFloat","dataset","Subscription","$email","$submit","subscription","handleEmailInput","email","String","toLowerCase","TextField","$double","$dateInput","preValue","textField","handleInputInput","handleInputChange","handleInputPaste","setPreValue","correctIncompleteDeletion","selectPos","selectionStart","tooManyDaysRegExp","tooManyMonthsRegExp","isFirstDigitMonthRegExp","isFirstDigitYearRegExp","tooManyDays","tooManyMonths","isFirstDigitMonth","isFirstDigitYear","days","slice","year","daysNumber","monthNumber","yearNumber","includes","isCorrectDate","lastEditedSubstring","needZeroToDays","needZeroToMonth","needTwoDigitsToYear","push","addPosition","placeholder","symbol","getPlaceholder","setSelectionRange","dateValue","isNaN","parse","field","$toggle"],"sourceRoot":""}