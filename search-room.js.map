{"version":3,"file":"search-room.js","mappings":"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","sources":["webpack://toxin-hotel/./assets/favicons/favicons.js","webpack://toxin-hotel/|/\\.(svg%7Cpng%7Cico%7Cxml%7Cjson%7Cwebmanifest)$/","webpack://toxin-hotel/./blocks/burger/burger.js","webpack://toxin-hotel/./blocks/card-room/card-room.js","webpack://toxin-hotel/./blocks/checkbox/checkbox.js","webpack://toxin-hotel/./blocks/datepicker/datepicker.js","webpack://toxin-hotel/./blocks/dropdown/dropdown.js","webpack://toxin-hotel/./blocks/paginator/paginator.js","webpack://toxin-hotel/./blocks/rate/rate.js","webpack://toxin-hotel/./node_modules/toxin-slider/model.ts","webpack://toxin-hotel/./node_modules/toxin-slider/thumb.ts","webpack://toxin-hotel/./node_modules/toxin-slider/progress-bar.ts","webpack://toxin-hotel/./node_modules/toxin-slider/bar.ts","webpack://toxin-hotel/./node_modules/toxin-slider/scale.ts","webpack://toxin-hotel/./node_modules/toxin-slider/view.ts","webpack://toxin-hotel/./node_modules/toxin-slider/controller.ts","webpack://toxin-hotel/./blocks/slider-toxin/slider-toxin.js","webpack://toxin-hotel/./node_modules/toxin-slider/toxin-slider.ts","webpack://toxin-hotel/./blocks/subscription/subscription.js","webpack://toxin-hotel/./assets/favicons/android-chrome-192x192.png","webpack://toxin-hotel/./assets/favicons/android-chrome-512x512.png","webpack://toxin-hotel/./assets/favicons/apple-touch-icon.png","webpack://toxin-hotel/./assets/favicons/browserconfig.xml","webpack://toxin-hotel/./assets/favicons/favicon-16x16.png","webpack://toxin-hotel/./assets/favicons/favicon-32x32.png","webpack://toxin-hotel/./assets/favicons/favicon.ico","webpack://toxin-hotel/./assets/favicons/mstile-144x144.png","webpack://toxin-hotel/./assets/favicons/mstile-150x150.png","webpack://toxin-hotel/./assets/favicons/mstile-310x150.png","webpack://toxin-hotel/./assets/favicons/mstile-310x310.png","webpack://toxin-hotel/./assets/favicons/mstile-70x70.png","webpack://toxin-hotel/./assets/favicons/safari-pinned-tab.svg","webpack://toxin-hotel/./assets/favicons/site.webmanifest"],"sourcesContent":["const faviconsContext = require.context(\n  '!!file-loader?name=assets/favicons/[name].[ext]!.',\n  true,\n  /\\.(svg|png|ico|xml|json|webmanifest)$/,\n);\n\nfaviconsContext.keys().forEach(faviconsContext);\n","var map = {\n\t\"./android-chrome-192x192.png\": 320,\n\t\"./android-chrome-512x512.png\": 641,\n\t\"./apple-touch-icon.png\": 879,\n\t\"./browserconfig.xml\": 978,\n\t\"./favicon-16x16.png\": 435,\n\t\"./favicon-32x32.png\": 723,\n\t\"./favicon.ico\": 211,\n\t\"./mstile-144x144.png\": 833,\n\t\"./mstile-150x150.png\": 962,\n\t\"./mstile-310x150.png\": 577,\n\t\"./mstile-310x310.png\": 811,\n\t\"./mstile-70x70.png\": 282,\n\t\"./safari-pinned-tab.svg\": 598,\n\t\"./site.webmanifest\": 983\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 250;","import $ from 'jquery';\n\nconst openCloseTime = 50;\nconst interval = 40;\n\nclass Burger {\n  $burger;\n\n  timerID;\n\n  timeStamp;\n\n  constructor(burger) {\n    this.$burger = $(burger);\n  }\n\n  init() {\n    this.timerID = 0;\n    this.timeStamp = 0;\n\n    this.$burger\n      .on(\n        'mousedown',\n        null,\n        { burger: this },\n        handleBurgerMousedown,\n      )\n      .on(\n        'mousedown',\n        '.js-burger__item',\n        { },\n        handleItemMousedown,\n      )\n      .on(\n        'focusin',\n        null,\n        { burger: this },\n        handleBurgerFocusin,\n      )\n      .on(\n        'focusout',\n        null,\n        { burger: this },\n        handleBurgerFocusout,\n      )\n      .on(\n        'mousedown',\n        '.js-burger__submenu',\n        { },\n        handleSubmenuMousedown,\n      );\n\n    $('.js-burger__submenu', this.$burger)\n      .on('focusin', null, { }, handleSubmenuFocusin)\n      .on('focusout', null, { }, handleSubmenuFocusout);\n\n    return this;\n  }\n\n  open() {\n    this.$burger.addClass('burger_open');\n\n    return this;\n  }\n\n  close() {\n    this.$burger.removeClass('burger_open');\n\n    return this;\n  }\n\n  setTimerID(id) {\n    this.timerID = id;\n\n    return this;\n  }\n\n  setTimeStamp(timeStamp) {\n    this.timeStamp = timeStamp;\n\n    return this;\n  }\n}\n\nfunction handleBurgerMousedown(event) {\n  const { burger } = event.data;\n\n  if (Math.abs(event.timeStamp - burger.timeStamp) < interval) {\n    return;\n  }\n\n  burger.setTimeStamp(event.timeStamp);\n\n  burger.$burger.toggleClass('burger_open');\n}\n\nfunction open(burger) {\n  burger.open();\n}\n\nfunction handleBurgerFocusin(event) {\n  const { burger } = event.data;\n\n  if (Math.abs(event.timeStamp - burger.timeStamp) < interval) {\n    return;\n  }\n\n  burger.setTimeStamp(event.timeStamp);\n\n  clearTimeout(burger.timerID);\n\n  burger.setTimerID(setTimeout(open, openCloseTime, burger));\n}\n\nfunction close(burger) {\n  burger.close();\n}\n\nfunction handleBurgerFocusout(event) {\n  const { burger } = event.data;\n\n  clearTimeout(burger.timerID);\n\n  burger.setTimerID(setTimeout(close, openCloseTime, burger));\n}\n\nfunction handleItemMousedown(event) {\n  event.stopPropagation();\n}\n\nfunction handleSubmenuMousedown(event) {\n  const $submenu = $(event.target);\n  const timeStamp = parseFloat($submenu.attr('data-timestamp'));\n\n  if (Math.abs(event.timeStamp - timeStamp) < interval) {\n    return;\n  }\n\n  $submenu.attr('data-timestamp', event.timeStamp);\n\n  $submenu.toggleClass('burger__submenu_open');\n}\n\nfunction openSub($submenu) {\n  $submenu.addClass('burger__submenu_open');\n}\n\nfunction handleSubmenuFocusin(event) {\n  const $submenu = $(event.delegateTarget);\n  const timeStamp = parseFloat($submenu.attr('data-timestamp'));\n  const timerID = parseFloat($submenu.attr('data-timer-id'));\n\n  if (Math.abs(event.timeStamp - timeStamp) < interval) {\n    return;\n  }\n\n  $submenu.attr('data-timestamp', event.timeStamp);\n\n  clearTimeout(timerID);\n\n  $submenu.attr('data-timer-id', setTimeout(openSub, openCloseTime, $submenu));\n}\n\nfunction closeSub($submenu) {\n  $submenu.removeClass('burger__submenu_open');\n}\n\nfunction handleSubmenuFocusout(event) {\n  const $submenu = $(event.delegateTarget);\n  const timerID = parseFloat($submenu.attr('data-timer-id'));\n\n  clearTimeout(timerID);\n\n  $submenu.attr('data-timer-id', setTimeout(closeSub, openCloseTime, $submenu));\n}\n\n$('.js-burger').each((index, burger) => {\n  const jsBurger = new Burger(burger);\n  jsBurger.init();\n});\n","import $ from 'jquery';\n\n/* this constant should be duplicated in ./card-room.pug: const quantitySlides = 4;\n  and in ./card-room.scss: $quantity-slides: 4; */\nconst quantitySlides = 4;\n\nconst enter = 13;\nconst spaceBar = 32;\nconst left = 37;\nconst right = 39;\n\nclass CardRoom {\n  #$card;\n\n  #$form;\n\n  #slide;\n\n  constructor(card) {\n    this.#$card = $(card);\n\n    this.#slide = 0;\n  }\n\n  init() {\n    this.#$card\n      .on('keydown', { card: this }, handleCardKeydown);\n\n    this.#$form = $('.js-card-room__form', this.#$card);\n\n    $('.js-card-room__back', this.#$card)\n      .on(\n        'mousedown',\n        null,\n        { card: this },\n        handleBackMousedown,\n      );\n\n    $('.js-card-room__forward', this.#$card)\n      .on(\n        'mousedown',\n        null,\n        { card: this },\n        handleForwardMousedown,\n      );\n\n    $('.js-card-room__nav', this.#$card)\n      .on(\n        'mousedown',\n        '.js-card-room__nav-item',\n        { card: this },\n        handleNavMousedown,\n      );\n\n    return this;\n  }\n\n  back() {\n    this.#slide -= 1;\n\n    if (this.#slide < 0) {\n      this.#slide = quantitySlides - 1;\n    }\n\n    this.#$card.attr('data-slide', this.#slide);\n\n    return this;\n  }\n\n  forward() {\n    this.#slide += 1;\n\n    if (this.#slide >= quantitySlides) {\n      this.#slide = 0;\n    }\n\n    this.#$card.attr('data-slide', this.#slide);\n\n    return this;\n  }\n\n  setSlide(slide) {\n    this.#slide = slide;\n    this.#$card.attr('data-slide', slide);\n\n    return this;\n  }\n\n  confirm() {\n    this.#$form.trigger('submit');\n\n    return this;\n  }\n}\n\nfunction handleCardKeydown(event) {\n  const { keyCode } = event;\n  const { card } = event.data;\n\n  if (keyCode === enter || keyCode === spaceBar) {\n    event.preventDefault();\n\n    card.confirm();\n\n    return;\n  }\n\n  if (keyCode === left) {\n    event.preventDefault();\n\n    card.back();\n\n    return;\n  }\n\n  if (keyCode === right) {\n    event.preventDefault();\n\n    card.forward();\n  }\n}\n\nfunction handleBackMousedown(event) {\n  const { card } = event.data;\n\n  card.back();\n}\n\nfunction handleForwardMousedown(event) {\n  const { card } = event.data;\n\n  card.forward();\n}\n\nfunction handleNavMousedown(event) {\n  const { card } = event.data;\n\n  const slide = parseInt(event.target.dataset.slide, 10);\n\n  card.setSlide(slide);\n}\n\n$('.js-card-room').each((index, card) => {\n  const jsCard = new CardRoom(card);\n  jsCard.init();\n});\n","import $ from 'jquery';\n\nconst enter = 13;\nconst spaceBar = 32;\n\n$(document).on('keydown', '.checkbox__input', handleCheckKeydown);\n$(document).on('keydown mousedown', '.checkbox__expand-label', handleExpandToggle);\n\nfunction handleCheckKeydown(event) {\n  if (event.keyCode === enter || event.keyCode === spaceBar) {\n    event.preventDefault();\n\n    const $checkbox = $(event.target);\n\n    const checked = $checkbox.prop('checked');\n\n    $checkbox.prop('checked', !checked);\n  }\n}\n\nfunction handleExpandToggle(event) {\n  const { type, keyCode } = event;\n  const $expand = $(event.target);\n\n  if (type === 'keydown') {\n    if (keyCode === enter || keyCode === spaceBar) {\n      event.preventDefault();\n      $expand.toggleClass('checkbox__expand-label_close');\n    }\n  } else {\n    $expand.toggleClass('checkbox__expand-label_close');\n  }\n}\n","import $ from 'jquery';\n\nconst months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];\nconst shortMonths = ['янв', 'фев', 'мар', 'апр', 'мая', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];\n\nconst enter = 13;\nconst spaceBar = 32;\nconst left = 37;\nconst up = 38;\nconst right = 39;\nconst down = 40;\n\nclass Datepicker {\n  $datepicker;\n\n  $arrival;\n\n  $departure;\n\n  $dropFilter;\n\n  $dropArrival;\n\n  $dropDeparture;\n\n  $back;\n\n  $monthYear;\n\n  $calendar;\n\n  $clear;\n\n  $confirm;\n\n  today;\n\n  cursorDate;\n\n  calendarMonth;\n\n  constructor(datepicker) {\n    this.$datepicker = $(datepicker);\n  }\n\n  init() {\n    this.$datepicker\n      .on('keydown', { datepicker: this }, handleDatepickerKeydown);\n\n    if (!this.$datepicker.hasClass('datepicker_format_demo')) {\n      this.$datepicker\n        .on('focusin', { datepicker: this }, handleDatepickerFocusin)\n        .on('mousedown', { datepicker: this }, handleDatepickerMousedown);\n\n      $('.js-datepicker__down', this.$datepicker)\n        .on('mousedown', stop);\n    }\n\n    this.$arrival = $('.js-datepicker__input_date_arrival', this.$datepicker)\n      .val('');\n\n    this.$departure = $('.js-datepicker__input_date_departure', this.$datepicker)\n      .val('');\n\n    this.$dropFilter = $('.js-datepicker__drop_format_filter', this.$datepicker);\n\n    this.$dropArrival = $('.js-datepicker__drop_date_arrival', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleArrivalMousedown);\n\n    this.$dropDeparture = $('.js-datepicker__drop_date_departure', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleDepartureMousedown);\n\n    this.$back = $('.js-datepicker__button_action_back', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleBackMousedown);\n\n    $('.js-datepicker__button_action_forward', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleForwardMousedown);\n\n    this.$monthYear = $('.js-datepicker__month-year', this.$datepicker);\n\n    this.$calendar = $('.js-datepicker__tbody', this.$datepicker)\n      .on(\n        'click',\n        '.datepicker__cell_clickable',\n        { datepicker: this },\n        handleCellClick,\n      );\n\n    this.$clear = $('.js-datepicker__button_action_clear', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleClearMousedown);\n\n    this.$confirm = $('.js-datepicker__button_action_confirm', this.$datepicker)\n      .on('mousedown', { datepicker: this }, handleConfirmMousedown);\n\n    const now = new Date();\n    this.today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    this.cursorDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    this.calendarMonth = new Date(now.getFullYear(), now.getMonth());\n\n    return this.update();\n  }\n\n  update() {\n    const arrival = this.$arrival.val();\n    const departure = this.$departure.val();\n\n    const dateArrival = new Date(arrival);\n    const dateDeparture = new Date(departure);\n\n    dateArrival.setHours(0, 0, 0);\n    dateDeparture.setHours(0, 0, 0);\n\n    const hasPeriod = (arrival !== '') && (departure !== '');\n\n    if (hasPeriod) {\n      this.$dropFilter\n        .text(\n          `${dateArrival.getDate()} ${shortMonths[dateArrival.getMonth()]} - ${dateDeparture.getDate()} ${shortMonths[dateDeparture.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text(arrival.split('-').reverse().join('.'))\n        .attr('datetime', arrival);\n      this.$dropDeparture\n        .text(departure.split('-').reverse().join('.'))\n        .attr('datetime', departure);\n    } else if (arrival !== '') {\n      this.$dropFilter\n        .text(\n          `${dateArrival.getDate()} ${shortMonths[dateArrival.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text(arrival.split('-').reverse().join('.'))\n        .attr('datetime', arrival);\n      this.$dropDeparture\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n    } else if (departure !== '') {\n      this.$dropFilter\n        .text(\n          `${dateDeparture.getDate()} ${shortMonths[dateDeparture.getMonth()]}`,\n        );\n      this.$dropArrival\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n      this.$dropDeparture\n        .text(departure.split('-').reverse().join('.'))\n        .attr('datetime', departure);\n    } else {\n      this.$dropFilter.text('Укажите даты пребывания');\n      this.$dropDeparture\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n      this.$dropArrival\n        .text('ДД.ММ.ГГГГ')\n        .attr('datetime', '1970-01-01');\n    }\n\n    this.$back.prop(\n      'disabled',\n      this.today.getMonth() === this.calendarMonth.getMonth()\n      && this.today.getFullYear() === this.calendarMonth.getFullYear(),\n    );\n\n    this.$monthYear.text(\n      `${months[this.calendarMonth.getMonth()]} ${this.calendarMonth.getFullYear()}`,\n    );\n\n    const cycleDate = new Date(this.calendarMonth.getFullYear(), this.calendarMonth.getMonth());\n\n    const dayOfWeek = cycleDate.getDay() ? cycleDate.getDay() - 1 : 6;\n    cycleDate.setDate(cycleDate.getDate() - dayOfWeek);\n\n    let calendarHTML = '';\n\n    do {\n      calendarHTML += '<tr class=\"datepicker__row\">';\n\n      for (let i = 0; i < 7; i += 1) {\n        let cellClasses = '';\n        let cellPeriod = '';\n\n        if (\n          cycleDate.getTime() === dateArrival.getTime()\n          || cycleDate.getTime() === dateDeparture.getTime()\n        ) {\n          cellClasses += ' datepicker__cell_selected';\n        } else if (cycleDate.getTime() === this.cursorDate.getTime()) {\n          cellClasses += ' datepicker__cell_format_cursor datepicker__cell_clickable';\n        } else if (cycleDate.getTime() === this.today.getTime()) {\n          cellClasses += ' datepicker__cell_date_today datepicker__cell_clickable';\n        } else if (cycleDate > this.today) {\n          cellClasses += ' datepicker__cell_clickable';\n        }\n\n        if (cycleDate.getMonth() !== this.calendarMonth.getMonth()) {\n          cellClasses += ' datepicker__cell_date_other-month';\n        }\n\n        if (hasPeriod) {\n          if (cycleDate.getTime() === dateArrival.getTime()) {\n            if (i < 6) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_arrival\"></div>';\n            }\n          } else if (cycleDate.getTime() === dateDeparture.getTime()) {\n            if (i > 0) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_departure\"></div>';\n            }\n          } else if (\n            dateArrival < cycleDate\n            && cycleDate < dateDeparture\n          ) {\n            if (i === 0) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_monday\"></div>';\n            } else if (i === 6) {\n              cellPeriod = '<div class=\"datepicker__cell-period datepicker__cell-period_date_sunday\"></div>';\n            } else {\n              cellPeriod = '<div class=\"datepicker__cell-period\"></div>';\n            }\n          }\n        }\n\n        calendarHTML += `\n          <td class=\"js-datepicker__cell datepicker__cell ${cellClasses}\" data-date=\"${getDateString(cycleDate)}\">\n            ${cycleDate.getDate()}\n            ${cellPeriod}\n          </td>\n        `;\n\n        cycleDate.setDate(cycleDate.getDate() + 1);\n      }\n\n      calendarHTML += '</tr>';\n    } while (cycleDate.getMonth() === this.calendarMonth.getMonth());\n\n    this.$calendar.html(calendarHTML);\n\n    this.$clear.prop(\n      'disabled',\n      arrival === '' && departure === '',\n    );\n\n    this.$confirm.prop('disabled', !hasPeriod);\n\n    return this;\n  }\n\n  setDate(date) {\n    let arrival = this.$arrival.val();\n    let departure = this.$departure.val();\n\n    if (this.$datepicker.attr('data-active') === 'arrival') {\n      arrival = date;\n    } else {\n      departure = date;\n    }\n\n    if (arrival !== '' && departure !== '') {\n      if (arrival > departure) {\n        [arrival, departure] = [departure, arrival];\n      }\n    }\n\n    if (date === arrival) {\n      this.$datepicker.attr('data-active', 'departure');\n    } else {\n      this.$datepicker.attr('data-active', 'arrival');\n    }\n\n    this.$arrival.val(arrival);\n    this.$departure.val(departure);\n\n    this.$datepicker.trigger('input');\n\n    return this;\n  }\n}\n\nfunction handleDatepickerFocusin(event) {\n  const { datepicker } = event.data;\n  const { $datepicker } = datepicker;\n\n  const close = (eventIN) => {\n    const { close: closeIN, datepicker: datepickerIN } = eventIN.data;\n    const { $datepicker: $datepickerIN } = datepickerIN;\n\n    if ($datepickerIN.hasClass('datepicker_just-now-focused')) {\n      $datepickerIN.removeClass('datepicker_just-now-focused');\n      return;\n    }\n\n    $datepickerIN.removeClass('datepicker_open');\n\n    $(window).off('focusin focusout mousedown', closeIN);\n\n    $datepickerIN\n      .off('focusin focusout', stop)\n      .on('focusin', { datepicker: datepickerIN }, handleDatepickerFocusin);\n  };\n\n  $datepicker.addClass('datepicker_open datepicker_just-now-focused');\n\n  $(window).on('focusin focusout mousedown', { datepicker, close }, close);\n\n  $datepicker\n    .off('focusin', handleDatepickerFocusin)\n    .on('focusin  focusout', stop);\n}\n\nfunction handleDatepickerMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.toggleClass('datepicker_open');\n\n  event.stopPropagation();\n}\n\nfunction handleDatepickerKeydown(event) {\n  const { datepicker } = event.data;\n  const {\n    today,\n    cursorDate,\n    calendarMonth,\n    $arrival,\n    $departure,\n  } = datepicker;\n  const { keyCode } = event;\n\n  const arrival = new Date($arrival.val());\n  const departure = new Date($departure.val());\n\n  arrival.setHours(0, 0, 0);\n  departure.setHours(0, 0, 0);\n\n  if (keyCode === enter || keyCode === spaceBar) {\n    event.preventDefault();\n\n    if (\n      cursorDate.getTime() === arrival.getTime()\n      || cursorDate.getTime() === departure.getTime()\n    ) {\n      return;\n    }\n\n    datepicker.setDate(getDateString(cursorDate));\n\n    datepicker.update();\n\n    return;\n  }\n\n  const temp = new Date(\n    cursorDate.getFullYear(),\n    cursorDate.getMonth(),\n    cursorDate.getDate(),\n  );\n\n  switch (keyCode) {\n    case left:\n      temp.setDate(temp.getDate() - 1);\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() - 1);\n      }\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() - 1);\n      }\n      break;\n    case up:\n      temp.setDate(temp.getDate() - 7);\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() - 7);\n      }\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() - 7);\n      }\n      break;\n    case right:\n      temp.setDate(temp.getDate() + 1);\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() + 1);\n      }\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() + 1);\n      }\n      break;\n    case down:\n      temp.setDate(temp.getDate() + 7);\n      if (temp.getTime() === arrival.getTime()) {\n        temp.setDate(temp.getDate() + 7);\n      }\n      if (temp.getTime() === departure.getTime()) {\n        temp.setDate(temp.getDate() + 7);\n      }\n      break;\n    default:\n      return;\n  }\n\n  event.preventDefault();\n\n  if (temp < today) {\n    return;\n  }\n\n  cursorDate.setFullYear(\n    temp.getFullYear(),\n    temp.getMonth(),\n    temp.getDate(),\n  );\n\n  calendarMonth.setFullYear(\n    temp.getFullYear(),\n    temp.getMonth(),\n  );\n\n  datepicker.update();\n}\n\nfunction handleArrivalMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.attr('data-active', 'arrival');\n}\n\nfunction handleDepartureMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.attr('data-active', 'departure');\n}\n\nfunction handleForwardMousedown(event) {\n  const { datepicker } = event.data;\n  const { calendarMonth: month } = datepicker;\n\n  month.setMonth(month.getMonth() + 1);\n\n  datepicker.update();\n}\n\nfunction handleBackMousedown(event) {\n  const { datepicker } = event.data;\n  const { calendarMonth: month } = datepicker;\n\n  month.setMonth(month.getMonth() - 1);\n\n  datepicker.update();\n}\n\nfunction handleCellClick(event) {\n  const { datepicker } = event.data;\n\n  const date = $(event.target).data('date');\n\n  datepicker.setDate(date);\n\n  datepicker.update();\n}\n\nfunction handleClearMousedown(event) {\n  const { datepicker } = event.data;\n  const {\n    $datepicker,\n    $arrival,\n    $departure,\n    today,\n    cursorDate,\n    calendarMonth,\n  } = datepicker;\n\n  $datepicker.attr('data-active', 'arrival');\n\n  $arrival.val('');\n  $departure.val('');\n\n  $datepicker.trigger('input');\n\n  cursorDate.setFullYear(today.getFullYear(), today.getMonth(), today.getDate());\n  calendarMonth.setFullYear(today.getFullYear(), today.getMonth());\n\n  datepicker.update();\n}\n\nfunction handleConfirmMousedown(event) {\n  const { $datepicker } = event.data.datepicker;\n\n  $datepicker.removeClass('datepicker_open');\n}\n\nfunction stop(event) {\n  event.stopPropagation();\n}\n\nfunction getDateString(date) {\n  const zeroMonth = date.getMonth() < 9 ? '0' : '';\n  const zeroDate = date.getDate() < 10 ? '0' : '';\n\n  return `${date.getFullYear()}-${zeroMonth}${date.getMonth() + 1}-${zeroDate}${date.getDate()}`;\n}\n\n$('.js-datepicker').each((index, datepicker) => {\n  const jsDatepicker = new Datepicker(datepicker);\n  jsDatepicker.init();\n});\n","import $ from 'jquery';\n\nconst pressingTime = 500;\nconst changeInterval = 75;\n\nconst maxNumberItems = 99;\n\nconst deleteKey = 46;\nconst backspaceKey = 8;\nconst zeroKey = 48;\nconst nineKey = 57;\n\nclass Dropdown {\n  $dropdown;\n\n  $drop;\n\n  $quantities;\n\n  $clear;\n\n  $confirm;\n\n  constructor(dropdown) {\n    this.$dropdown = $(dropdown);\n  }\n\n  init() {\n    this.$dropdown\n      .on('mousedown', { dropdown: this }, handleDropdownMousedown)\n      .on('input', { dropdown: this }, handleDropdownInput)\n      .on('focusin', { dropdown: this }, handleDropdownFocusin);\n\n    this.$drop = $('.js-dropdown__drop', this.$dropdown);\n\n    this.$quantities = $('.js-dropdown__quantity', this.$dropdown);\n\n    $('.js-dropdown__item', this.$dropdown).each((index, item) => {\n      const $item = $(item);\n\n      const $quantity = $('.js-dropdown__quantity', $item)\n        .on('keydown', handleQuantityKeydown)\n        .val('');\n\n      const $minus = $('.js-dropdown__counter-button_action_minus', $item)\n        .on('mousedown', { $quantity }, handleMinusMousedown);\n\n      const $plus = $('.js-dropdown__counter-button_action_plus', $item)\n        .on('mousedown', { $quantity }, handlePlusMousedown);\n\n      $quantity\n        .on('input', { $minus, $plus }, handleQuantityInput);\n\n      $('.js-dropdown__counter-button', $item)\n        .on('mouseup mouseout focusout', { $quantity }, handleCounterButtonMouseup);\n    });\n\n    $('.js-dropdown__down', this.$dropdown)\n      .on('mousedown', stop);\n\n    this.$clear = $('.js-dropdown__button_action_clear', this.$dropdown)\n      .on('mousedown', { dropdown: this }, handleClearMousedown);\n\n    this.$confirm = $('.js-dropdown__button_action_confirm', this.$dropdown)\n      .on('mousedown', { dropdown: this }, handleConfirmMousedown);\n\n    return this;\n  }\n}\n\nfunction handleDropdownMousedown(event) {\n  const { $dropdown } = event.data.dropdown;\n\n  $dropdown.toggleClass('dropdown_open');\n\n  event.stopPropagation();\n}\n\nfunction handleDropdownFocusin(event) {\n  const { dropdown } = event.data;\n  const { $dropdown } = dropdown;\n\n  const close = (eventIN) => {\n    const { close: closeIN, dropdown: dropdownIN } = eventIN.data;\n    const { $dropdown: $dropdownIN } = dropdownIN;\n\n    if ($dropdownIN.hasClass('dropdown_just-now-focused')) {\n      $dropdownIN.removeClass('dropdown_just-now-focused');\n      return;\n    }\n\n    $dropdownIN.removeClass('dropdown_open');\n\n    $(window).off('focusin focusout mousedown', closeIN);\n\n    $dropdownIN\n      .off('focusin focusout', stop)\n      .on('focusin', { dropdown: dropdownIN }, handleDropdownFocusin);\n  };\n\n  $dropdown.addClass('dropdown_open dropdown_just-now-focused');\n\n  $(window).on('focusin focusout mousedown', { dropdown, close }, close);\n\n  $dropdown\n    .off('focusin', handleDropdownFocusin)\n    .on('focusin focusout', stop);\n}\n\nfunction handleDropdownInput(event) {\n  const { dropdown } = event.data;\n  const {\n    $drop,\n    $quantities,\n    $clear,\n    $confirm,\n  } = dropdown;\n\n  const quantities = $quantities.get();\n\n  let isEmpty = true;\n  let isEnough = true;\n\n  quantities.reduceRight((previous, input) => {\n    const $input = $(input);\n\n    const quantity = $input.attr('data-quantity');\n    const surplus = $input.attr('data-surplus');\n    const nominative = $input.attr('data-nominative');\n    const genitive = $input.attr('data-genitive');\n    const genitivePlural = $input.attr('data-genitive-plural');\n    const min = parseInt($input.attr('data-min'), 10);\n\n    const thisValue = parseInt(quantity, 10);\n\n    if (thisValue > 0) {\n      isEmpty = false;\n    }\n\n    if (thisValue < min) {\n      isEnough = false;\n    }\n\n    const value = thisValue + previous;\n\n    if (surplus !== undefined) {\n      return value;\n    }\n\n    const lastTwoDigits = value % 100;\n    const lastDigit = value % 10;\n\n    const genitivePluralValue = (lastTwoDigits > 4 && lastTwoDigits < 21)\n      || lastDigit > 4\n      || lastDigit === 0;\n\n    if (value === 0) {\n      $input.attr('data-value', '');\n    } else if (genitivePluralValue) {\n      $input.attr('data-value', `${value} ${genitivePlural}`);\n    } else if (lastDigit === 1) {\n      $input.attr('data-value', `${value} ${nominative}`);\n    } else {\n      $input.attr('data-value', `${value} ${genitive}`);\n    }\n\n    return 0;\n  }, 0);\n\n  let numberItems = 0;\n\n  const common = quantities.reduce((previous, input) => {\n    const $input = $(input);\n    const value = $input.attr('data-value');\n\n    if (value !== '') {\n      numberItems += 1;\n\n      if (numberItems === maxNumberItems + 1) {\n        return `${previous}...`;\n      }\n\n      if (numberItems > maxNumberItems + 1) {\n        return previous;\n      }\n    }\n\n    if (value !== '' && previous !== '') {\n      return `${previous}, ${value}`;\n    }\n\n    return `${previous}${value}`;\n  }, '');\n\n  if (common !== '') {\n    $drop.text(common);\n  } else {\n    $drop.text($drop.attr('data-placeholder'));\n  }\n\n  $clear.prop('disabled', isEmpty);\n  $confirm.prop('disabled', !isEnough);\n}\n\nfunction handleMinusMousedown(event) {\n  const { $quantity } = event.data;\n  const $button = $(event.target);\n\n  minus($quantity);\n\n  if (parseInt($quantity.val(), 10) > 0) {\n    const timerID = setTimeout(\n      fastMinus,\n      pressingTime,\n      $quantity,\n      $button,\n    );\n\n    $button.attr('data-timer-id', timerID);\n  }\n}\n\nfunction handlePlusMousedown(event) {\n  const { $quantity } = event.data;\n  const $button = $(event.target);\n  const max = parseInt($quantity.attr('max'), 10);\n\n  plus($quantity);\n\n  if (parseInt($quantity.val(), 10) < max) {\n    const timerID = setTimeout(\n      fastPlus,\n      pressingTime,\n      $quantity,\n      $button,\n    );\n\n    $button.attr('data-timer-id', timerID);\n  }\n}\n\nfunction handleCounterButtonMouseup(event) {\n  const timerID = parseInt($(event.target).attr('data-timer-id'), 10);\n\n  clearTimeout(timerID);\n  clearInterval(timerID);\n}\n\nfunction handleQuantityInput(event) {\n  const $input = $(event.target);\n  const { $minus, $plus } = event.data;\n\n  const previous = parseInt($input.attr('data-previous'), 10);\n\n  const valusString = $input.val();\n\n  const valueNumber = parseInt(valusString, 10) || 0;\n\n  const max = $input.attr('max');\n\n  const isCorrect = valusString.match(/^\\d{0,2}$/)\n    && valueNumber <= max\n    && valueNumber >= 0;\n\n  if (!isCorrect) {\n    if (previous > 0) {\n      $input.val(previous);\n    } else {\n      $input.val('');\n    }\n    return;\n  }\n\n  $input.val(valusString.replace(/^0*/, ''));\n\n  $input\n    .attr('data-quantity', valueNumber)\n    .attr('data-previous', valueNumber);\n\n  $minus.prop('disabled', !(valueNumber > 0));\n\n  $plus.prop('disabled', !(valueNumber < max));\n\n  if (valueNumber < 1) {\n    const timerID = parseInt($minus.attr('data-timer-id'), 10);\n\n    clearTimeout(timerID);\n    clearInterval(timerID);\n  } else if (valueNumber >= max) {\n    const timerID = parseInt($plus.attr('data-timer-id'), 10);\n\n    clearTimeout(timerID);\n    clearInterval(timerID);\n  }\n}\n\nfunction handleQuantityKeydown(event) {\n  const $input = $(event.target);\n  const { keyCode } = event;\n\n  const max = $input.attr('max');\n\n  let valueString = $input.val();\n\n  if (keyCode === backspaceKey || keyCode === deleteKey) {\n    event.preventDefault();\n\n    $input.val(valueString.replace(/.$/, ''));\n    $input.trigger('input');\n  } else if (keyCode >= zeroKey && keyCode <= nineKey) {\n    event.preventDefault();\n\n    const digit = keyCode - zeroKey;\n\n    valueString = `${valueString}${digit}`;\n    let valueNumber = parseInt(valueString, 10);\n\n    let isCorrect = valueString.match(/^\\d{0,2}$/)\n      && valueNumber <= max\n      && valueNumber >= 0;\n\n    if (!isCorrect) {\n      if (valueString.length > 1) {\n        valueString = valueString.replace(/^./, '');\n        valueNumber = parseInt(valueString, 10);\n\n        isCorrect = valueString.match(/^\\d{0,2}$/)\n          && valueNumber <= max\n          && valueNumber >= 0;\n\n        if (!isCorrect) {\n          if (valueString.length > 1) {\n            valueString = valueString.replace(/^./, '');\n            valueNumber = parseInt(valueString, 10);\n\n            isCorrect = valueString.match(/^\\d{0,2}$/)\n              && valueNumber <= max\n              && valueNumber >= 0;\n\n            if (!isCorrect) {\n              return;\n            }\n          } else {\n            return;\n          }\n        }\n      } else {\n        return;\n      }\n    }\n\n    $input.val(valueString);\n    $input.trigger('input');\n  }\n}\n\nfunction handleClearMousedown(event) {\n  const { $dropdown, $quantities } = event.data.dropdown;\n\n  $quantities.each((index, input) => {\n    const $input = $(input);\n\n    $input\n      .val('')\n      .triggerHandler('input');\n  });\n\n  $dropdown.trigger('input');\n}\n\nfunction handleConfirmMousedown(event) {\n  const { $dropdown } = event.data.dropdown;\n\n  $dropdown.removeClass('dropdown_open');\n}\n\nfunction minus($input) {\n  const value = parseInt($input.val(), 10);\n\n  if (value > 0) {\n    $input.val(value - 1);\n  }\n\n  $input.trigger('input');\n}\n\nfunction plus($input) {\n  const value = parseInt($input.val(), 10) || 0;\n\n  const max = $input.attr('max');\n\n  if (value < max) {\n    $input.val(value + 1);\n  }\n\n  $input.trigger('input');\n}\n\nfunction fastMinus($input, $button) {\n  const timerID = setInterval(minus, changeInterval, $input);\n\n  $button.attr('data-timer-id', timerID);\n}\n\nfunction fastPlus($input, $button) {\n  const timerID = setInterval(plus, changeInterval, $input);\n\n  $button.attr('data-timer-id', timerID);\n}\n\nfunction stop(event) {\n  event.stopPropagation();\n}\n\n$('.js-dropdown').each((index, dropdown) => {\n  const jsDropdown = new Dropdown(dropdown);\n  jsDropdown.init();\n});\n","import $ from 'jquery';\n\nconst left = 37;\nconst right = 39;\n\n// this constant should be duplicated in ./paginator.pug: const numberItemsInPage = 12;\nconst numberItemsInPage = 12;\n\nclass Paginator {\n  $paginator;\n\n  $description;\n\n  length;\n\n  active;\n\n  constructor(paginator) {\n    this.$paginator = $(paginator);\n  }\n\n  init() {\n    this.active = 1;\n\n    this.length = parseInt(this.$paginator.attr('data-length'), 10);\n\n    this.$description = $('.js-paginator__description', this.$paginator);\n\n    this.$paginator\n      .on(\n        'keydown',\n        { paginator: this },\n        handleItemKeydown,\n      )\n      .on(\n        'mousedown',\n        '.js-paginator__item',\n        { paginator: this },\n        handleItemMousedown,\n      );\n\n    return this;\n  }\n\n  back() {\n    if (this.active > 1) {\n      this.setActive(this.active - 1);\n    }\n\n    return this;\n  }\n\n  forward() {\n    if (this.active < this.length) {\n      this.setActive(this.active + 1);\n    }\n\n    return this;\n  }\n\n  setActive(active) {\n    this.active = active;\n    this.$paginator.attr('data-active', active);\n    this.$description.text(\n      `${(active - 1) * numberItemsInPage + 1} – ${active * numberItemsInPage} из 100+ вариантов аренды`,\n    );\n\n    return this;\n  }\n}\n\nfunction handleItemKeydown(event) {\n  const { keyCode } = event;\n  const { paginator } = event.data;\n\n  if (keyCode === left) {\n    event.preventDefault();\n\n    paginator.back();\n\n    return;\n  }\n\n  if (keyCode === right) {\n    event.preventDefault();\n\n    paginator.forward();\n  }\n}\n\nfunction handleItemMousedown(event) {\n  const { paginator } = event.data;\n\n  const number = $(event.target).attr('data-number');\n\n  if (number === 'back') {\n    paginator.back();\n\n    return;\n  }\n\n  if (number === 'forward') {\n    paginator.forward();\n\n    return;\n  }\n\n  paginator.setActive(parseInt(number, 10));\n}\n\n$('.js-paginator').each((index, paginator) => {\n  const jsPaginator = new Paginator(paginator);\n  jsPaginator.init();\n});\n","import $ from 'jquery';\n\n/*  this constant should be duplicated in ./rate.pug: const maxRating = 5;\n    and in ./rate.scss: $max-rating: 5; */\nconst maxRating = 5;\n\nconst left = 37;\nconst right = 39;\n\nclass Rate {\n  $rate;\n\n  $input;\n\n  rating;\n\n  constructor(rate) {\n    this.$rate = $(rate);\n\n    this.rating = parseInt(this.$rate.attr('data-rating'), 10);\n  }\n\n  init() {\n    this.$rate\n      .on('mouseover', '.js-rate__star', { rate: this }, handleStarMouseover)\n      .on('mouseout', '.js-rate__star', { rate: this }, handleStarMouseout)\n      .on('mousedown', '.js-rate__star', { rate: this }, handleStarMousedown)\n      .on('keydown', { rate: this }, handleRateKeydown)\n      .append(`\n        <input\n          type=\"number\"\n          class=\"rate__input js-rate__input\"\n          name=\"rating\"\n        >`);\n\n    this.$input = $('.js-rate__input').val(this.rating);\n\n    return this;\n  }\n\n  setRating(rating) {\n    this.rating = rating;\n\n    return this;\n  }\n}\n\nfunction handleStarMouseover(event) {\n  const { $rate } = event.data.rate;\n\n  $rate.attr('data-rating', $(event.target).attr('data-rating'));\n}\n\nfunction handleStarMouseout(event) {\n  const { $rate, rating } = event.data.rate;\n\n  $rate.attr('data-rating', rating);\n}\n\nfunction handleStarMousedown(event) {\n  const { rate } = event.data;\n  const rating = parseInt($(event.target).attr('data-rating'), 10);\n\n  rate.setRating(rating);\n  rate.$input.val(rating);\n}\n\nfunction handleRateKeydown(event) {\n  const { rate } = event.data;\n  const { keyCode } = event;\n  const { $rate, $input, rating } = rate;\n\n  if (keyCode === left || keyCode === right) {\n    event.preventDefault();\n\n    const newRating = (() => {\n      if (keyCode === left) {\n        if (rating > 1) {\n          return rating - 1;\n        }\n\n        return rating;\n      }\n\n      if (rating < maxRating) {\n        return rating + 1;\n      }\n\n      return rating;\n    })();\n\n    rate.setRating(newRating);\n    $input.val(newRating);\n    $rate.attr('data-rating', newRating);\n  }\n}\n\n$('.js-rate.rate_enabled').each((index, rate) => {\n  const jsRate = new Rate(rate);\n  jsRate.init();\n});\n","export default class Model {\n  state: ModelState = {\n    start: 0,\n    end: 0,\n    step: 0,\n    from: 0,\n    to: 0,\n    hasTwoValues: false,\n  };\n\n  private modulo = 0;\n\n  constructor(state: ModelState) {\n    this.update(state);\n  }\n\n  update(message: Message): ModelState {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n    const { modulo } = this;\n\n    const assignToNearest = (between: number) => {\n      if (hasTwoValues) {\n        if (Math.abs(from - between) < Math.abs(to - between)) {\n          this.state.from = between;\n        } else {\n          this.state.to = between;\n        }\n      } else {\n        this.state.from = between;\n      }\n    };\n\n    const assignToCongruent = (between: number, comparable: number) => {\n      if (hasTwoValues) {\n        if (comparable === from) {\n          this.state.from = between;\n        } else {\n          this.state.to = between;\n        }\n      } else {\n        this.state.from = between;\n      }\n    };\n\n    if (isBarMessage(message)) {\n      const { size, clickPoint } = message;\n\n      const newValue = this.normalizeValue((clickPoint * (end - start)) / size + start);\n\n      assignToNearest(newValue);\n\n      return this.sortValues();\n    }\n\n    if (isMoveMessage(message)) {\n      const { moveDirection, value } = message;\n\n      const specialCase = (modulo !== 0) && (value === end) && (moveDirection === -1);\n\n      const newValue = specialCase\n        ? end - modulo\n        : value + step * moveDirection;\n\n      assignToCongruent(this.normalizeValue(newValue), value);\n\n      return this.sortValues();\n    }\n\n    if (isScaleMessage(message)) {\n      const { scaleValue } = message;\n\n      assignToNearest(scaleValue);\n\n      return this.sortValues();\n    }\n\n    if (!isDragMessage(message)) {\n      this.state = { ...this.state, ...message };\n\n      return this.normalizeState();\n    }\n\n    const { innerOffset, wrapperSize, value } = message;\n\n    const newValue = this.normalizeValue((innerOffset * (end - start)) / wrapperSize + start);\n\n    assignToCongruent(newValue, value);\n\n    return this.sortValues();\n  }\n\n  normalizeState(): ModelState {\n    const {\n      from = 0,\n      to = 0,\n    } = this.state;\n\n    this.modulo = this.normalizeStep().getModulo();\n\n    this.state.from = this.normalizeValue(from);\n    this.state.to = this.normalizeValue(to);\n\n    return this.sortValues();\n  }\n\n  normalizeStep(): Model {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n\n    if (Math.abs(step) > Math.abs(end - start)) {\n      this.state.step = end - start;\n    } else {\n      const isCorrectStepSign = (end > start && step > 0) || (end < start && step < 0);\n\n      if (!isCorrectStepSign) {\n        this.state.step = -1 * step;\n      }\n    }\n\n    return this;\n  }\n\n  normalizeValue(raw: number): number {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n    const { modulo } = this;\n\n    if (start > end) {\n      if (raw > start) {\n        return start;\n      }\n\n      if (raw < end) {\n        return end;\n      }\n\n      if (step !== 0) {\n        if (raw < (end - modulo / 2)) {\n          return end;\n        }\n\n        if (raw < (end - modulo)) {\n          return end - modulo;\n        }\n\n        return start + step * Math.round((raw - start) / step);\n      }\n\n      return raw;\n    }\n\n    if (raw < start) {\n      return start;\n    }\n\n    if (raw > end) {\n      return end;\n    }\n\n    if (step !== 0) {\n      if (raw > (end - modulo / 2)) {\n        return end;\n      }\n\n      if (raw > (end - modulo)) {\n        return end - modulo;\n      }\n\n      return start + step * Math.round((raw - start) / step);\n    }\n\n    return raw;\n  }\n\n  sortValues(): ModelState {\n    const {\n      start = 0,\n      end = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n\n    if (hasTwoValues) {\n      if (start > end) {\n        if (from < to) {\n          [this.state.from, this.state.to] = [to, from];\n        }\n      } else if (from > to) {\n        [this.state.from, this.state.to] = [to, from];\n      }\n    }\n\n    return this.state;\n  }\n\n  getModulo(): number {\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n    } = this.state;\n\n    if (step === 0) {\n      return 0;\n    }\n\n    return end - start - step * Math.floor((end - start) / step);\n  }\n}\n\nfunction isDragMessage(message: Message): message is DragMessage {\n  return (message as DragMessage).innerOffset !== undefined;\n}\n\nfunction isBarMessage(message: Message): message is BarMessage {\n  return (message as BarMessage).size !== undefined;\n}\n\nfunction isMoveMessage(message: Message): message is MoveMessage {\n  return (message as MoveMessage).moveDirection !== undefined;\n}\n\nfunction isScaleMessage(message: Message): message is ScaleMessage {\n  return (message as ScaleMessage).scaleValue !== undefined;\n}\n","import $ from 'jquery';\n\nconst thumbHTML = '<div class=\"toxin-slider__thumb\" tabindex=\"0\"></div>';\nconst tooltipHTML = '<div class=\"toxin-slider__thumb-tooltip\"></div>';\n\nconst left = 37;\nconst up = 38;\nconst right = 39;\nconst down = 40;\n\nenum MoveDirection {\n  back = -1,\n  stop,\n  forward,\n}\n\nexport default class Thumb {\n  readonly $wrapper: JQuery;\n\n  readonly $thumb: JQuery;\n\n  readonly $tooltip: JQuery;\n\n  state: ThumbState = {\n    value: 0,\n    position: 0,\n    isVertical: false,\n    hidden: false,\n    tooltipHidden: false,\n    units: '',\n  };\n\n  drag: DragData = {\n    position: null as DragPosition,\n    innerOffset: 0,\n    wrapperPosition: 0,\n    wrapperSize: 0,\n    minRestriction: 0,\n    maxRestriction: 0,\n  };\n\n  /* This property describes thumb movement using the KEYBOARD\n  and is named using the word MOVE instead of DRAG by design. */\n  moveDirection: MoveDirection = MoveDirection.stop;\n\n  constructor(options: { $wrapper: JQuery; state: ThumbState }) {\n    const { $wrapper, state } = options;\n\n    this.$tooltip = $(tooltipHTML);\n    this.$thumb = $(thumbHTML).append(this.$tooltip);\n    this.$wrapper = $wrapper.append(this.$thumb);\n\n    this.$thumb.on('mousedown pointerdown', { thumb: this }, handleThumbMousedown);\n    this.$thumb.on('keydown', { thumb: this }, handleThumbKeydown);\n    this.$thumb.on('keyup', { thumb: this }, handleThumbKeyup);\n\n    this.update(state);\n  }\n\n  update(state: ThumbState): Thumb {\n    this.state = { ...this.state, ...state };\n\n    this.position();\n\n    this.$tooltip.text(`${new Intl.NumberFormat('ru-RU').format(state.value)}${state.units ?? ''}`);\n\n    if (state.hidden) {\n      this.$thumb.addClass('toxin-slider__thumb_hidden');\n    } else {\n      this.$thumb.removeClass('toxin-slider__thumb_hidden');\n    }\n\n    if (state.tooltipHidden) {\n      this.$tooltip.addClass('toxin-slider__thumb-tooltip_hidden');\n    } else {\n      this.$tooltip.removeClass('toxin-slider__thumb-tooltip_hidden');\n    }\n\n    return this;\n  }\n\n  getPosition(): number {\n    return this.drag.position === null ? this.state.position : this.drag.position;\n  }\n\n  getDirection(): MoveDirection {\n    return this.moveDirection;\n  }\n\n  sendDragMessage(): Thumb {\n    this.$thumb.trigger(\n      'toxin-slider.update',\n      {\n        innerOffset: this.drag.innerOffset,\n        wrapperSize: this.drag.wrapperSize,\n        value: this.state.value,\n      },\n    );\n\n    return this;\n  }\n\n  sendMoveMessage(): Thumb {\n    this.$thumb.trigger(\n      'toxin-slider.update',\n      {\n        moveDirection: this.getDirection(),\n        value: this.state.value,\n      },\n    );\n\n    return this;\n  }\n\n  private position(): Thumb {\n    const axis = this.state.isVertical ? 'Y' : 'X';\n    const position = this.getPosition();\n\n    this.$thumb.css('transform', `translate${axis}(${\n      axis === 'X' ? (position - 100) : (-1 * position)\n    }%)`);\n\n    return this;\n  }\n}\n\nfunction handleThumbMousedown(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const {\n    $thumb,\n    $wrapper,\n    state,\n    drag,\n  } = thumb;\n\n  if (state.isVertical) {\n    drag.wrapperPosition = $wrapper.offset()?.top ?? 0;\n    drag.wrapperSize = $wrapper.outerHeight() ?? 0;\n  } else {\n    drag.wrapperPosition = $wrapper.offset()?.left ?? 0;\n    drag.wrapperSize = $wrapper.outerWidth() ?? 0;\n  }\n\n  const thumbPosition = state.isVertical\n    ? ($thumb.offset()?.top ?? 0)\n    : ($thumb.offset()?.left ?? 0);\n\n  const thumbSize = state.isVertical\n    ? ($thumb.outerHeight() ?? 0)\n    : ($thumb.outerWidth() ?? 0);\n\n  const mousePosition = state.isVertical\n    ? (event.clientY ?? 0)\n    : (event.clientX ?? 0);\n\n  const grabPoint = mousePosition - thumbPosition - thumbSize;\n\n  drag.minRestriction = grabPoint + drag.wrapperPosition;\n  drag.maxRestriction = drag.minRestriction + drag.wrapperSize;\n\n  drag.innerOffset = state.isVertical\n    ? drag.wrapperPosition - thumbPosition\n    : thumbPosition + thumbSize - drag.wrapperPosition;\n\n  $(document).on('mousemove pointermove', { thumb }, handleThumbMousemove);\n  $(document).on('mouseup pointerup', { thumb }, handleThumbMouseup);\n\n  $wrapper.addClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbMousemove(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { state, drag } = thumb;\n\n  const mousePosition = state.isVertical\n    ? (event.clientY ?? 0)\n    : (event.clientX ?? 0);\n\n  if (mousePosition < drag.minRestriction) {\n    drag.innerOffset = state.isVertical\n      ? drag.wrapperSize\n      : 0;\n  } else if (mousePosition > drag.maxRestriction) {\n    drag.innerOffset = state.isVertical\n      ? 0\n      : drag.wrapperSize;\n  } else {\n    drag.innerOffset = state.isVertical\n      ? drag.maxRestriction - mousePosition\n      : mousePosition - drag.minRestriction;\n  }\n\n  drag.position = (100 * drag.innerOffset) / drag.wrapperSize;\n\n  thumb.sendDragMessage();\n}\n\nfunction handleThumbMouseup(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { drag, $wrapper } = thumb;\n\n  $(document).off('mousemove pointermove', handleThumbMousemove);\n  $(document).off('mouseup pointerup', handleThumbMouseup);\n\n  drag.position = null;\n\n  thumb.sendDragMessage();\n\n  $wrapper.removeClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbKeydown(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { $wrapper } = thumb;\n  const { keyCode } = event;\n\n  if (keyCode === up || keyCode === right) {\n    thumb.moveDirection = MoveDirection.forward;\n  } else if (keyCode === down || keyCode === left) {\n    thumb.moveDirection = MoveDirection.back;\n  }\n\n  if (thumb.getDirection() !== MoveDirection.stop) {\n    event.preventDefault();\n    thumb.sendMoveMessage();\n  }\n\n  $wrapper.addClass('toxin-slider__inner-wrapper_draggable');\n}\n\nfunction handleThumbKeyup(event: JQuery.TriggeredEvent) {\n  const { thumb } = event.data as { thumb: Thumb };\n  const { $wrapper } = thumb;\n\n  thumb.moveDirection = MoveDirection.stop;\n\n  $wrapper.removeClass('toxin-slider__inner-wrapper_draggable');\n}\n","import $ from 'jquery';\n\nconst progressBarHTML = '<div class=\"toxin-slider__progress-bar\"></div>';\n\nexport default class ProgressBar {\n  readonly $progressBar: JQuery;\n\n  constructor(options: { $wrapper: JQuery; state: ProgressBarState }) {\n    const { $wrapper, state } = options;\n\n    this.$progressBar = $(progressBarHTML);\n    $wrapper.append(this.$progressBar);\n\n    this.update(state);\n  }\n\n  update(state: ProgressBarState): ProgressBar {\n    this.$progressBar.css(\n      'transform',\n      state.isVertical\n        ? `translate(-50%, ${100 - state.max}%) scaleY(${state.max - state.min}%)`\n        : `translate(${state.min}%, -50%) scaleX(${state.max - state.min}%)`,\n    );\n\n    if (state.hidden) {\n      this.$progressBar.addClass('toxin-slider__progress-bar_hidden');\n    } else {\n      this.$progressBar.removeClass('toxin-slider__progress-bar_hidden');\n    }\n\n    return this;\n  }\n}\n","import $ from 'jquery';\n\n/* This constant should be duplicated in the stylesheet ./toxin-slider.scss: $thumb-length\nand the test file ../test/bar.test.ts: const thumbLength */\nconst thumbLength = 16;\n\nconst halfThumbLength = thumbLength / 2;\n\nconst barHTML = '<div class=\"toxin-slider__bar\"></div>';\n\nexport default class Bar {\n  readonly $bar: JQuery;\n\n  isVertical = false;\n\n  constructor(options: { $wrapper: JQuery, isVertical: boolean }) {\n    const { $wrapper, isVertical } = options;\n\n    this.$bar = $(barHTML);\n    $wrapper.append(this.$bar);\n\n    this.$bar.on('mousedown', { bar: this }, handleBarMousedown);\n\n    this.update(isVertical);\n  }\n\n  update(isVertical: boolean) {\n    this.isVertical = isVertical;\n\n    return this;\n  }\n}\n\nfunction handleBarMousedown(event: JQuery.TriggeredEvent) {\n  const { bar } = event.data as { bar: Bar };\n  const { $bar, isVertical } = bar;\n\n  const size = isVertical\n    ? ($bar.outerHeight() ?? 0)\n    : ($bar.outerWidth() ?? 0);\n\n  const clickPoint = isVertical\n    ? ($bar.offset()?.top ?? 0) - window.scrollY + size - (event?.clientY ?? 0)\n    : (event?.clientX ?? 0) + window.scrollX - ($bar.offset()?.left ?? 0);\n\n  $bar.trigger('toxin-slider.update', {\n    size: normalizeSize(),\n    clickPoint: normalizeClickPoint(),\n  });\n\n  function normalizeSize(): number {\n    return size - thumbLength;\n  }\n\n  function normalizeClickPoint(): number {\n    if (clickPoint < halfThumbLength) {\n      return 0;\n    }\n\n    if (clickPoint > size - halfThumbLength) {\n      return size - thumbLength;\n    }\n\n    return clickPoint - halfThumbLength;\n  }\n}\n","import $ from 'jquery';\n\nconst scaleHTML = '<div class=\"toxin-slider__scale\"></div>';\nconst itemHTML = '<div class=\"toxin-slider__scale-item\"></div>';\nconst valueHTML = '<div class=\"toxin-slider__scale-value js-toxin-slider__scale-value\"></div>';\nconst innerWrapperHTML = '<div class=\"toxin-slider__scale-inner-wrapper\"></div>';\n\nexport default class Scale {\n  readonly $scale: JQuery;\n\n  state: ScaleState = {\n    start: NaN,\n    end: NaN,\n    step: NaN,\n    hidden: false,\n    units: '',\n  };\n\n  constructor(options: { $wrapper: JQuery; state: ScaleState }) {\n    const { $wrapper, state } = options;\n\n    this.$scale = $(scaleHTML);\n    $wrapper.append(this.$scale);\n\n    this.$scale.on(\n      'mousedown',\n      '.toxin-slider__scale-value',\n      { $scale: this.$scale },\n      handleScaleMousedown,\n    );\n\n    this.update(state);\n  }\n\n  update(state: ScaleState) {\n    const scaleChange = (\n      (this.state.start !== state.start)\n      || (this.state.end !== state.end)\n      || (this.state.step !== state.step)\n    );\n\n    if (scaleChange) {\n      this.$scale.empty().append(getInnerScale(state));\n      this.state = { ...this.state, ...state };\n    }\n\n    if (state.hidden) {\n      this.$scale.addClass('toxin-slider__scale_hidden');\n    } else {\n      this.$scale.removeClass('toxin-slider__scale_hidden');\n    }\n  }\n}\n\nfunction handleScaleMousedown(event: JQuery.TriggeredEvent) {\n  const { $scale } = event.data as { $scale: JQuery };\n  const scaleValue = Number($(event.target).attr('data-value'));\n\n  $scale.trigger('toxin-slider.update', { scaleValue });\n}\n\nfunction getInnerScale(options: {\n  start: number;\n  end: number;\n  step: number;\n  units?: string;\n}): JQuery {\n  const {\n    start,\n    end,\n    step,\n    units = '',\n  } = options;\n\n  /* If the step is zero, the scale consists of extreme values only */\n  const scaleStep = step === 0 ? end - start : step;\n\n  const modulo = step === 0 ? 0 : end - start - step * Math.floor((end - start) / step);\n\n  let cycleValue = start;\n  const $innerScale = $(innerWrapperHTML)\n    .append(\n      $(itemHTML)\n        .append(\n          $(valueHTML)\n            .text(\n              `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n            )\n            .attr('data-value', cycleValue),\n        )\n        // an invisible element is needed as a spacer\n        .append(\n          $(valueHTML)\n            .text(\n              `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n            )\n            .addClass('toxin-slider__scale-value_invisible'),\n        )\n        .css(\n          {\n            'flex-grow': Math.abs(scaleStep),\n            'flex-basis': '0',\n          },\n        ),\n    );\n\n  let i = 1;\n\n  do {\n    cycleValue = start + scaleStep * i;\n\n    const $item = $(itemHTML);\n\n    const specialCase = (cycleValue === end - modulo) && (cycleValue !== end);\n    const outOfScale = (\n      cycleValue > start && cycleValue > end\n    ) || (\n      cycleValue < start && cycleValue < end\n    );\n\n    if (specialCase) {\n      $item\n        .addClass('toxin-slider__scale-item_penult')\n        .css(\n          {\n            'flex-grow': Math.abs(scaleStep),\n            'flex-basis': '0',\n          },\n        );\n    } else if (cycleValue === end) {\n      $item.css({\n        'flex-grow': Math.abs(scaleStep),\n        'flex-basis': '0',\n      });\n    } else if (outOfScale) {\n      cycleValue = end;\n      $item.css({\n        'flex-grow': Math.abs(2 * modulo),\n        'flex-basis': '0',\n      });\n    } else {\n      $item.css({\n        'flex-grow': Math.abs(2 * scaleStep),\n        'flex-basis': '0',\n      });\n    }\n\n    // an invisible element is needed as a spacer\n    if (cycleValue === end) {\n      $item.append(\n        $(valueHTML)\n          .text(\n            `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n          )\n          .addClass('toxin-slider__scale-value_invisible'),\n      );\n    }\n\n    $innerScale\n      .append(\n        $item\n          .append(\n            $(valueHTML)\n              .text(\n                `${new Intl.NumberFormat('ru-RU').format(cycleValue)}${units}`,\n              )\n              .attr('data-value', cycleValue),\n          ),\n      );\n\n    i += 1;\n  } while (cycleValue !== end);\n\n  return $innerScale;\n}\n","import $ from 'jquery';\n\nimport Thumb from './thumb';\nimport ProgressBar from './progress-bar';\nimport Bar from './bar';\nimport Scale from './scale';\n\nconst toxinSliderHTML = '<div class=\"toxin-slider js-toxin-slider\"></div>';\nconst innerWrapperHTML = '<div class=\"toxin-slider__inner-wrapper\"></div>';\nconst inputHTML = '<input type=\"number\" class=\"toxin-slider__input\">';\n\nexport default class View {\n  readonly $toxinSlider: JQuery;\n\n  readonly $from: JQuery;\n\n  readonly $to: JQuery;\n\n  thumbA: Thumb;\n\n  thumbB: Thumb;\n\n  readonly progressBar: ProgressBar;\n\n  readonly scale: Scale;\n\n  readonly bar: Bar;\n\n  state: ViewState = {\n    start: 0,\n    end: 0,\n    step: 0,\n    from: 0,\n    to: 0,\n    hasTwoValues: false,\n    isVertical: false,\n    progressBarHidden: false,\n    scaleHidden: false,\n    tooltipHidden: false,\n    units: '',\n    name: 'undefined-name',\n  };\n\n  constructor(options: { $outerWrapper: JQuery, state: ViewState }) {\n    const { $outerWrapper, state } = options;\n\n    this.state = { ...this.state, ...state };\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n      isVertical = false,\n      progressBarHidden = false,\n      tooltipHidden = false,\n      scaleHidden = false,\n      units = '',\n      name = 'undefined-name',\n    } = this.state;\n\n    const $innerWrapper = $(innerWrapperHTML);\n\n    const { min, max } = this.calculateRange();\n\n    this.thumbA = new Thumb({\n      $wrapper: $innerWrapper,\n      state: {\n        isVertical,\n        tooltipHidden,\n        units,\n        value: from,\n        position: min,\n        hidden: !hasTwoValues,\n      },\n    });\n\n    this.thumbB = new Thumb({\n      $wrapper: $innerWrapper,\n      state: {\n        isVertical,\n        tooltipHidden,\n        units,\n        value: hasTwoValues ? to : from,\n        position: max,\n        hidden: false,\n      },\n    });\n\n    this.progressBar = new ProgressBar({\n      $wrapper: $innerWrapper,\n      state: {\n        min,\n        max,\n        isVertical,\n        hidden: progressBarHidden,\n      },\n    });\n\n    this.$toxinSlider = $(toxinSliderHTML);\n\n    if (!hasTwoValues && !progressBarHidden) {\n      this.$toxinSlider.addClass('toxin-slider_range_single');\n    }\n\n    if (isVertical) {\n      this.$toxinSlider.addClass('toxin-slider_direction_vertical');\n    }\n\n    this.bar = new Bar({\n      isVertical,\n      $wrapper: this.$toxinSlider,\n    });\n\n    this.$from = $(inputHTML)\n      .attr('name', `${name}-from`)\n      .val(from);\n    this.$to = $(inputHTML)\n      .attr('name', `${name}-to`)\n      .val(to);\n\n    this.$toxinSlider\n      .append($innerWrapper)\n      .append(this.$from)\n      .append(this.$to);\n\n    this.scale = new Scale({\n      $wrapper: this.$toxinSlider,\n      state: {\n        start,\n        end,\n        step,\n        units,\n        hidden: scaleHidden,\n      },\n    });\n\n    $outerWrapper.append(this.$toxinSlider);\n\n    this.$toxinSlider.trigger('toxin-slider.slide', this.state);\n  }\n\n  update(state: ViewState): View {\n    this.state = { ...this.state, ...state };\n    const {\n      start = 0,\n      end = 0,\n      step = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n      isVertical = false,\n      progressBarHidden = false,\n      tooltipHidden = false,\n      scaleHidden = false,\n      units = '',\n    } = this.state;\n\n    this.$from.val(from);\n    this.$to.val(to);\n\n    if (!hasTwoValues && !progressBarHidden) {\n      this.$toxinSlider.addClass('toxin-slider_range_single');\n    } else {\n      this.$toxinSlider.removeClass('toxin-slider_range_single');\n    }\n\n    if (isVertical) {\n      this.$toxinSlider.addClass('toxin-slider_direction_vertical');\n    } else {\n      this.$toxinSlider.removeClass('toxin-slider_direction_vertical');\n    }\n\n    const { min, max } = this.sortThumbs().calculateRange();\n    const {\n      thumbA,\n      thumbB,\n      progressBar,\n      bar,\n      scale,\n    } = this;\n\n    thumbA.update({\n      isVertical,\n      tooltipHidden,\n      units,\n      value: from,\n      position: min,\n      hidden: !hasTwoValues,\n    });\n\n    thumbB.update({\n      isVertical,\n      tooltipHidden,\n      units,\n      value: hasTwoValues ? to : from,\n      position: max,\n      hidden: false,\n    });\n\n    progressBar.update({\n      isVertical,\n      min: thumbA.getPosition(),\n      max: thumbB.getPosition(),\n      hidden: progressBarHidden,\n    });\n\n    bar.update(isVertical);\n\n    scale.update({\n      start,\n      end,\n      step,\n      units,\n      hidden: scaleHidden,\n    });\n\n    return this;\n  }\n\n  calculateRange(): { min: number; max: number; } {\n    const {\n      start = 0,\n      end = 0,\n      from = 0,\n      to = 0,\n      hasTwoValues = false,\n    } = this.state;\n\n    const scope = end - start;\n\n    if (scope === 0) {\n      return {\n        min: 0,\n        max: 0,\n      };\n    }\n\n    const min = hasTwoValues\n      ? (100 * (from - start)) / scope\n      : 0;\n\n    const max = hasTwoValues\n      ? (100 * (to - start)) / scope\n      : (100 * (from - start)) / scope;\n\n    return { min, max };\n  }\n\n  sortThumbs(): View {\n    const { hasTwoValues = false } = this.state;\n    const { thumbA, thumbB } = this;\n\n    if (hasTwoValues) {\n      if (thumbA.getPosition() > thumbB.getPosition()) {\n        [this.thumbA, this.thumbB] = [thumbB, thumbA];\n      } else if (thumbA.getPosition() === thumbB.getPosition()) {\n        if (thumbA.getDirection() > thumbB.getDirection()) {\n          [this.thumbA, this.thumbB] = [thumbB, thumbA];\n        }\n      }\n    }\n\n    return this;\n  }\n}\n","import Model from './model';\nimport View from './view';\n\nexport default class Controller {\n  readonly model;\n\n  readonly view;\n\n  constructor(options: { model: Model, view: View }) {\n    const { model, view } = options;\n    const { $toxinSlider } = view;\n\n    this.model = model;\n    this.view = view;\n\n    $toxinSlider.on('toxin-slider.update', { model, view }, handleSliderUpdate);\n  }\n}\n\nfunction handleSliderUpdate(event: JQuery.TriggeredEvent, message: Message) {\n  const { model, view } = event.data as { model: Model; view: View };\n  const { $toxinSlider } = view;\n\n  view.update({ ...view.state, ...model.update(message) });\n\n  $toxinSlider.trigger('toxin-slider.slide', view.state);\n}\n","import $ from 'jquery';\n\nimport 'toxin-slider/toxin-slider.ts';\nimport 'toxin-slider/toxin-slider.scss';\n\nfunction handleSlide(event, { from, to }) {\n  event.data.$value\n    .text(\n      `${new Intl.NumberFormat('ru-RU').format(from)}₽ - ${new Intl.NumberFormat('ru-RU').format(to)}₽`,\n    );\n}\n\n$('.js-slider-toxin').each((index, slider) => {\n  const $slider = $(slider);\n  const $value = $('.js-slider-toxin__value', $slider);\n  $('.js-slider-toxin__body', $(slider))\n    .on(\n      'toxin-slider.slide',\n      { $value },\n      handleSlide,\n    )\n    .toxinSlider({\n      start: parseFloat(slider.dataset.start),\n      end: parseFloat(slider.dataset.end),\n      step: parseFloat(slider.dataset.step),\n      from: parseFloat(slider.dataset.from),\n      to: parseFloat(slider.dataset.to),\n      hasTwoValues: true,\n      scaleHidden: true,\n      tooltipHidden: true,\n      name: slider.dataset.name,\n    });\n});\n","import $ from 'jquery';\n\nimport Model from './model';\nimport View from './view';\nimport Controller from './controller';\n\n$.fn.toxinSlider = function toxinSlider(this: JQuery, state: ViewState): JQuery {\n  return this.each((index, outerWrapper) => {\n    const $outerWrapper = $(outerWrapper);\n    const $toxinSlider = $('.js-toxin-slider', $outerWrapper);\n\n    if ($toxinSlider.length > 0) {\n      $toxinSlider.trigger('toxin-slider.update', state);\n    } else {\n      const { name = '' } = state;\n      const sliderName = index > 0 ? `${name}-${index}` : name;\n      const sliderState = { ...state, ...{ name: sliderName } };\n\n      const model = new Model(sliderState);\n\n      const view = new View({\n        $outerWrapper,\n        state: model.state,\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const controller = new Controller({ model, view });\n    }\n  });\n};\n","import $ from 'jquery';\n\nclass Subscription {\n  #$subscription;\n\n  $email;\n\n  $submit;\n\n  constructor(subscription) {\n    this.#$subscription = $(subscription);\n  }\n\n  init() {\n    this.$email = $('.js-subscription__input', this.#$subscription);\n    this.$submit = $('.js-subscription__button', this.#$subscription);\n\n    this.$email\n      .on(\n        'input',\n        null,\n        { $email: this.$email, $submit: this.$submit },\n        handleEmailInput,\n      );\n\n    return this;\n  }\n}\n\nfunction isEmailValid(email) {\n  return String(email)\n    .toLowerCase()\n    .match(\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n    );\n}\n\nfunction handleEmailInput(event) {\n  const {\n    $email,\n    $submit,\n  } = event.data;\n\n  $submit.prop('disabled', !isEmailValid($email.val()));\n}\n\n$('.js-subscription').each((index, subscription) => {\n  const jsSubscription = new Subscription(subscription);\n  jsSubscription.init();\n});\n","export default __webpack_public_path__ + \"assets/favicons/android-chrome-192x192.png\";","export default __webpack_public_path__ + \"assets/favicons/android-chrome-512x512.png\";","export default __webpack_public_path__ + \"assets/favicons/apple-touch-icon.png\";","export default __webpack_public_path__ + \"assets/favicons/browserconfig.xml\";","export default __webpack_public_path__ + \"assets/favicons/favicon-16x16.png\";","export default __webpack_public_path__ + \"assets/favicons/favicon-32x32.png\";","export default __webpack_public_path__ + \"assets/favicons/favicon.ico\";","export default __webpack_public_path__ + \"assets/favicons/mstile-144x144.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-150x150.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-310x150.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-310x310.png\";","export default __webpack_public_path__ + \"assets/favicons/mstile-70x70.png\";","export default __webpack_public_path__ + \"assets/favicons/safari-pinned-tab.svg\";","export default __webpack_public_path__ + \"assets/favicons/site.webmanifest\";"],"names":["faviconsContext","keys","forEach","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","Object","resolve","module","exports","Burger","$burger","timerID","timeStamp","constructor","burger","this","init","on","handleBurgerMousedown","handleItemMousedown","handleBurgerFocusin","handleBurgerFocusout","handleSubmenuMousedown","handleSubmenuFocusin","handleSubmenuFocusout","open","addClass","close","removeClass","setTimerID","setTimeStamp","event","data","Math","abs","toggleClass","clearTimeout","setTimeout","stopPropagation","$submenu","target","parseFloat","attr","openSub","delegateTarget","closeSub","each","index","CardRoom","card","handleCardKeydown","handleBackMousedown","handleForwardMousedown","handleNavMousedown","back","quantitySlides","forward","setSlide","slide","confirm","trigger","keyCode","preventDefault","parseInt","dataset","document","$checkbox","checked","prop","type","$expand","months","shortMonths","Datepicker","$datepicker","$arrival","$departure","$dropFilter","$dropArrival","$dropDeparture","$back","$monthYear","$calendar","$clear","$confirm","today","cursorDate","calendarMonth","datepicker","handleDatepickerKeydown","hasClass","handleDatepickerFocusin","handleDatepickerMousedown","stop","val","handleArrivalMousedown","handleDepartureMousedown","handleCellClick","handleClearMousedown","handleConfirmMousedown","now","Date","getFullYear","getMonth","getDate","update","arrival","departure","dateArrival","dateDeparture","setHours","hasPeriod","text","split","reverse","join","cycleDate","dayOfWeek","getDay","setDate","calendarHTML","i","cellClasses","cellPeriod","getTime","getDateString","html","date","eventIN","closeIN","datepickerIN","$datepickerIN","window","off","temp","setFullYear","month","setMonth","zeroMonth","zeroDate","Dropdown","$dropdown","$drop","$quantities","dropdown","handleDropdownMousedown","handleDropdownInput","handleDropdownFocusin","item","$item","$quantity","handleQuantityKeydown","$minus","handleMinusMousedown","$plus","handlePlusMousedown","handleQuantityInput","handleCounterButtonMouseup","dropdownIN","$dropdownIN","quantities","get","isEmpty","isEnough","reduceRight","previous","input","$input","quantity","surplus","nominative","genitive","genitivePlural","min","thisValue","value","undefined","lastTwoDigits","lastDigit","genitivePluralValue","numberItems","common","reduce","maxNumberItems","$button","minus","fastMinus","max","plus","fastPlus","clearInterval","valusString","valueNumber","match","replace","valueString","isCorrect","length","triggerHandler","setInterval","Paginator","$paginator","$description","active","paginator","handleItemKeydown","setActive","number","Rate","$rate","rating","rate","handleStarMouseover","handleStarMouseout","handleStarMousedown","handleRateKeydown","append","setRating","newRating","Model","state","start","end","step","from","to","hasTwoValues","modulo","message","assignToNearest","between","assignToCongruent","comparable","size","isBarMessage","clickPoint","normalizeValue","sortValues","moveDirection","isMoveMessage","newValue","scaleValue","isScaleMessage","innerOffset","isDragMessage","normalizeState","wrapperSize","normalizeStep","getModulo","raw","round","floor","MoveDirection","Thumb","options","position","isVertical","hidden","tooltipHidden","units","drag","wrapperPosition","minRestriction","maxRestriction","$wrapper","$tooltip","$thumb","thumb","handleThumbMousedown","handleThumbKeydown","handleThumbKeyup","Intl","NumberFormat","format","getPosition","getDirection","sendDragMessage","sendMoveMessage","axis","css","offset","top","outerHeight","left","outerWidth","thumbPosition","thumbSize","grabPoint","clientY","clientX","handleThumbMousemove","handleThumbMouseup","mousePosition","ProgressBar","$progressBar","Bar","$bar","bar","handleBarMousedown","scrollY","scrollX","thumbLength","normalizeClickPoint","itemHTML","valueHTML","innerWrapperHTML","Scale","NaN","$scale","handleScaleMousedown","empty","scaleStep","cycleValue","$innerScale","outOfScale","getInnerScale","Number","inputHTML","View","progressBarHidden","scaleHidden","name","$outerWrapper","$innerWrapper","calculateRange","thumbA","thumbB","progressBar","$toxinSlider","$from","$to","scale","sortThumbs","scope","Controller","model","view","handleSliderUpdate","handleSlide","$value","outerWrapper","sliderName","sliderState","slider","$slider","toxinSlider","Subscription","$email","$submit","subscription","handleEmailInput","email","String","toLowerCase"],"sourceRoot":""}